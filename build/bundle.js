(()=>{var t={10:t=>{function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}},704:(t,e)=>{!function(t){"use strict";e.encode=function(e){var n,s=new Uint8Array(e),r=s.length,i="";for(n=0;n<r;n+=3)i+=t[s[n]>>2],i+=t[(3&s[n])<<4|s[n+1]>>4],i+=t[(15&s[n+1])<<2|s[n+2]>>6],i+=t[63&s[n+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(e){var n,s,r,i,o,a=.75*e.length,c=e.length,h=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),u=new Uint8Array(l);for(n=0;n<c;n+=4)s=t.indexOf(e[n]),r=t.indexOf(e[n+1]),i=t.indexOf(e[n+2]),o=t.indexOf(e[n+3]),u[h++]=s<<2|r>>4,u[h++]=(15&r)<<4|i>>2,u[h++]=(3&i)<<6|63&o;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},767:t=>{function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,s=this._callbacks["$"+t];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<s.length;r++)if((n=s[r])===e||n.fn===e){s.splice(r,1);break}return 0===s.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){s=0;for(var r=(n=n.slice(0)).length;s<r;++s)n[s].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},549:t=>{t.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},983:(t,e,n)=>{const s=n(192);t.exports=(t,e)=>new s(t,e),t.exports.Socket=s,t.exports.protocol=s.protocol,t.exports.Transport=n(496),t.exports.transports=n(352),t.exports.parser=n(743)},192:(t,e,n)=>{const s=n(352),r=n(767),i=n(802)("engine.io-client:socket"),o=n(743),a=n(187),c=n(830);class h extends r{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=a(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=a(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=c.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){i('creating transport "%s"',t);const e=function(t){const e={};for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.opts.query);e.EIO=o.protocol,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return i("options: %j",n),new s[t](n)}open(){let t;if(this.opts.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void setTimeout((()=>{this.emit("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return i("error while creating transport: %s",t),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){i("setting transport %s",t.name),this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(t){i('probing transport "%s"',t);let e=this.createTransport(t,{probe:1}),n=!1;h.priorWebsocketSuccess=!1;const s=()=>{n||(i('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(s=>{if(!n)if("pong"===s.type&&"probe"===s.data){if(i('probe transport "%s" pong',t),this.upgrading=!0,this.emit("upgrading",e),!e)return;h.priorWebsocketSuccess="websocket"===e.name,i('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{n||"closed"!==this.readyState&&(i("changing transport and sending upgrade packet"),u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emit("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{i('probe transport "%s" failed',t);const n=new Error("probe error");n.transport=e.name,this.emit("upgradeError",n)}})))};function r(){n||(n=!0,u(),e.close(),e=null)}const o=n=>{const s=new Error("probe error: "+n);s.transport=e.name,r(),i('probe transport "%s" failed because of error: %s',t,n),this.emit("upgradeError",s)};function a(){o("transport closed")}function c(){o("socket closed")}function l(t){e&&t.name!==e.name&&(i('"%s" works - aborting "%s"',t.name,e.name),r())}const u=()=>{e.removeListener("open",s),e.removeListener("error",o),e.removeListener("close",a),this.removeListener("close",c),this.removeListener("upgrading",l)};e.once("open",s),e.once("error",o),e.once("close",a),this.once("close",c),this.once("upgrading",l),e.open()}onOpen(){if(i("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){i("starting upgrade probes");let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else i('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,s){if("function"==typeof e&&(s=e,e=void 0),"function"==typeof n&&(s=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:t,data:e,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this.onClose("forced close"),i("socket closing - telling transport to close"),this.transport.close()},e=()=>{this.removeListener("upgrade",e),this.removeListener("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():t()})):this.upgrading?n():t()),this}onError(t){i("socket error %j",t),h.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(i('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let n=0;const s=t.length;for(;n<s;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}h.priorWebsocketSuccess=!1,h.protocol=o.protocol,t.exports=h},496:(t,e,n)=>{const s=n(743),r=n(767),i=n(802)("engine.io-client:transport");t.exports=class extends r{constructor(t){super(),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState?this.write(t):i("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(t){const e=s.decodePacket(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){this.emit("packet",t)}onClose(){this.readyState="closed",this.emit("close")}}},352:(t,e,n)=>{const s=n(777),r=n(416),i=n(785),o=n(442);e.polling=function(t){let e,n=!1,o=!1;const a=!1!==t.jsonp;if("undefined"!=typeof location){const e="https:"===location.protocol;let s=location.port;s||(s=e?443:80),n=t.hostname!==location.hostname||s!==t.port,o=t.secure!==e}if(t.xdomain=n,t.xscheme=o,e=new s(t),"open"in e&&!t.forceJSONP)return new r(t);if(!a)throw new Error("JSONP disabled");return new i(t)},e.websocket=o},785:(t,e,n)=>{const s=n(15),r=n(549),i=/\n/g,o=/\\n/g;let a;t.exports=class extends s{constructor(t){super(t),this.query=this.query||{},a||(a=r.___eio=r.___eio||[]),this.index=a.length,a.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=t=>{this.onError("jsonp poll error",t)};const e=document.getElementsByTagName("script")[0];e?e.parentNode.insertBefore(t,e):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){const t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)}doWrite(t,e){let n;if(!this.form){const t=document.createElement("form"),e=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;t.className="socketio",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.target=n,t.method="POST",t.setAttribute("accept-charset","utf-8"),e.name="d",t.appendChild(e),document.body.appendChild(t),this.form=t,this.area=e}function s(){r(),e()}this.form.action=this.uri();const r=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(t){this.onError("jsonp polling iframe removal error",t)}try{const t='<iframe src="javascript:0" name="'+this.iframeId+'">';n=document.createElement(t)}catch(t){n=document.createElement("iframe"),n.name=this.iframeId,n.src="javascript:0"}n.id=this.iframeId,this.form.appendChild(n),this.iframe=n};r(),t=t.replace(o,"\\\n"),this.area.value=t.replace(i,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=()=>{"complete"===this.iframe.readyState&&s()}:this.iframe.onload=s}}},416:(t,e,n)=>{const s=n(777),r=n(15),i=n(767),{pick:o}=n(839),a=n(549),c=n(802)("engine.io-client:polling-xhr");function h(){}const l=null!=new s({xdomain:!1}).responseType;class u extends i{constructor(t,e){super(),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=o(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new s(t);try{c("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),this.hasXDR()?(e.onload=()=>{this.onLoad()},e.onerror=()=>{this.onError(e.responseText)}):e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():setTimeout((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},c("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=u.requestsCount++,u.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=h:this.xhr.onreadystatechange=h,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete u.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}function p(){for(let t in u.requests)u.requests.hasOwnProperty(t)&&u.requests[t].abort()}u.requestsCount=0,u.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",p):"function"==typeof addEventListener&&addEventListener("onpagehide"in a?"pagehide":"unload",p,!1)),t.exports=class extends r{constructor(t){if(super(t),"undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=l&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new u(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(t=>{this.onError("xhr post error",t)}))}doPoll(){c("xhr poll");const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t=>{this.onError("xhr poll error",t)})),this.pollXhr=t}},t.exports.Request=u},15:(t,e,n)=>{const s=n(496),r=n(830),i=n(743),o=n(403),a=n(802)("engine.io-client:polling");t.exports=class extends s{get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{a("paused"),this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(a("we are currently polling - waiting to pause"),t++,this.once("pollComplete",(function(){a("pre-pause polling complete"),--t||e()}))),this.writable||(a("we are currently writing - waiting to pause"),t++,this.once("drain",(function(){a("pre-pause writing complete"),--t||e()})))}else e()}poll(){a("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){a("polling got data %s",t),i.decodePayload(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose(),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():a('ignoring poll - transport state "%s"',this.readyState))}doClose(){const t=()=>{a("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(a("transport open - closing"),t()):(a("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,i.encodePayload(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let n="";return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=o()),this.supportsBinary||t.sid||(t.b64=1),t=r.encode(t),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),t.length&&(t="?"+t),e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}}},866:(t,e,n)=>{const s=n(549),r="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):t=>setTimeout(t,0);t.exports={WebSocket:s.WebSocket||s.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:r}},442:(t,e,n)=>{const s=n(496),r=n(743),i=n(830),o=n(403),{pick:a}=n(839),{WebSocket:c,usingBrowserWebSocket:h,defaultBinaryType:l,nextTick:u}=n(866),p=n(802)("engine.io-client:websocket"),f="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class d extends s{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=f?{}:a(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=h&&!f?e?new c(t,e):new c(t):new c(t,e,n)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||l,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],s=e===t.length-1;r.encodePacket(n,this.supportsBinary,(t=>{const e={};!h&&(n.options&&(e.compress=n.options.compress),this.opts.perMessageDeflate)&&("string"==typeof t?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(e.compress=!1);try{h?this.ws.send(t):this.ws.send(t,e)}catch(t){p("websocket closed before onclose event")}s&&u((()=>{this.writable=!0,this.emit("drain")}))}))}}onClose(){s.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let n="";return this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=o()),this.supportsBinary||(t.b64=1),t=i.encode(t),t.length&&(t="?"+t),e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}check(){return!(!c||"__initialize"in c&&this.name===d.prototype.name)}}t.exports=d},839:t=>{t.exports.pick=(t,...e)=>e.reduce(((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e)),{})},777:(t,e,n)=>{const s=n(58),r=n(549);t.exports=function(t){const e=t.xdomain,n=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||s))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(t){}if(!e)try{return new(r[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},802:(t,e,n)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let s=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(s++,"%c"===t&&(r=s))})),e.splice(r,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(804)(e);const{formatters:s}=t.exports;s.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},804:(t,e,n)=>{t.exports=function(t){function e(t){let n,r,i,o=null;function a(...t){if(!a.enabled)return;const s=a,r=Number(new Date),i=r-(n||r);s.diff=i,s.prev=n,s.curr=r,n=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,r)=>{if("%%"===n)return"%";o++;const i=e.formatters[r];if("function"==typeof i){const e=t[o];n=i.call(s,e),t.splice(o,1),o--}return n})),e.formatArgs.call(s,t),(s.log||e.log).apply(s,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=s,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==e.namespaces&&(r=e.namespaces,i=e.enabled(t)),i),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function s(t,n){const s=e(this.namespace+(void 0===n?":":n)+t);return s.log=this.log,s}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const s=("string"==typeof t?t:"").split(/[\s,]+/),r=s.length;for(n=0;n<r;n++)s[n]&&("-"===(t=s[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,s;for(n=0,s=e.skips.length;n<s;n++)if(e.skips[n].test(t))return!1;for(n=0,s=e.names.length;n<s;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(810),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},810:t=>{var e=1e3,n=60*e,s=60*n,r=24*s;function i(t,e,n,s){var r=e>=1.5*n;return Math.round(t/n)+" "+s+(r?"s":"")}t.exports=function(t,o){o=o||{};var a,c,h=typeof t;if("string"===h&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(i){var o=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===h&&isFinite(t))return o.long?(a=t,(c=Math.abs(a))>=r?i(a,c,r,"day"):c>=s?i(a,c,s,"hour"):c>=n?i(a,c,n,"minute"):c>=e?i(a,c,e,"second"):a+" ms"):function(t){var i=Math.abs(t);return i>=r?Math.round(t/r)+"d":i>=s?Math.round(t/s)+"h":i>=n?Math.round(t/n)+"m":i>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},712:t=>{const e=Object.create(null);e.open="0",e.close="1",e.ping="2",e.pong="3",e.message="4",e.upgrade="5",e.noop="6";const n=Object.create(null);Object.keys(e).forEach((t=>{n[e[t]]=t})),t.exports={PACKET_TYPES:e,PACKET_TYPES_REVERSE:n,ERROR_PACKET:{type:"error",data:"parser error"}}},965:(t,e,n)=>{const{PACKET_TYPES_REVERSE:s,ERROR_PACKET:r}=n(712);let i;"function"==typeof ArrayBuffer&&(i=n(704));const o=(t,e)=>{if(i){const n=i.decode(t);return a(n,e)}return{base64:!0,data:t}},a=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};t.exports=(t,e)=>{if("string"!=typeof t)return{type:"message",data:a(t,e)};const n=t.charAt(0);return"b"===n?{type:"message",data:o(t.substring(1),e)}:s[n]?t.length>1?{type:s[n],data:t.substring(1)}:{type:s[n]}:r}},929:(t,e,n)=>{const{PACKET_TYPES:s}=n(712),r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),i="function"==typeof ArrayBuffer,o=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)};t.exports=({type:t,data:e},n,a)=>{return r&&e instanceof Blob?n?a(e):o(e,a):i&&(e instanceof ArrayBuffer||(c=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer))?n?a(e instanceof ArrayBuffer?e:e.buffer):o(new Blob([e]),a):a(s[t]+(e||""));var c}},743:(t,e,n)=>{const s=n(929),r=n(965),i=String.fromCharCode(30);t.exports={protocol:4,encodePacket:s,encodePayload:(t,e)=>{const n=t.length,r=new Array(n);let o=0;t.forEach(((t,a)=>{s(t,!1,(t=>{r[a]=t,++o===n&&e(r.join(i))}))}))},decodePacket:r,decodePayload:(t,e)=>{const n=t.split(i),s=[];for(let t=0;t<n.length;t++){const i=r(n[t],e);if(s.push(i),"error"===i.type)break}return s}}},58:t=>{try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},830:(t,e)=>{e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),s=0,r=n.length;s<r;s++){var i=n[s].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},187:t=>{var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var s,r,i=t,o=t.indexOf("["),a=t.indexOf("]");-1!=o&&-1!=a&&(t=t.substring(0,o)+t.substring(o,a).replace(/:/g,";")+t.substring(a,t.length));for(var c,h,l=e.exec(t||""),u={},p=14;p--;)u[n[p]]=l[p]||"";return-1!=o&&-1!=a&&(u.source=i,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=(s=u.path,r=s.replace(/\/{2,9}/g,"/").split("/"),"/"!=s.substr(0,1)&&0!==s.length||r.splice(0,1),"/"==s.substr(s.length-1,1)&&r.splice(r.length-1,1),r),u.queryKey=(c=u.query,h={},c.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(h[e]=n)})),h),u}},751:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.io=e.Socket=e.Manager=e.protocol=void 0;const s=n(744),r=n(703),i=n(669)("socket.io-client");t.exports=e=a;const o=e.managers={};function a(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};const n=s.url(t,e.path||"/socket.io"),a=n.source,c=n.id,h=n.path,l=o[c]&&h in o[c].nsps;let u;return e.forceNew||e["force new connection"]||!1===e.multiplex||l?(i("ignoring socket cache for %s",a),u=new r.Manager(a,e)):(o[c]||(i("new io instance for %s",a),o[c]=new r.Manager(a,e)),u=o[c]),n.query&&!e.query&&(e.query=n.queryKey),u.socket(n.path,e)}e.io=a;var c=n(485);Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return c.protocol}}),e.connect=a;var h=n(703);Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return h.Manager}});var l=n(277);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return l.Socket}}),e.default=a},703:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;const s=n(983),r=n(277),i=n(485),o=n(657),a=n(10),c=n(791),h=n(669)("socket.io-client:manager");class l extends c.StrictEventEmitter{constructor(t,e){super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new a({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const n=e.parser||i;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(h("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;h("opening %s",this.uri),this.engine=s(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=o.on(e,"open",(function(){n.onopen(),t&&t()})),i=o.on(e,"error",(e=>{h("error"),n.cleanup(),n._readyState="closed",this.emitReserved("error",e),t?t(e):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;h("connect attempt will timeout after %d",t),0===t&&r();const n=setTimeout((()=>{h("connect attempt timed out after %d",t),r(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(r),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){h("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(o.on(t,"ping",this.onping.bind(this)),o.on(t,"data",this.ondata.bind(this)),o.on(t,"error",this.onerror.bind(this)),o.on(t,"close",this.onclose.bind(this)),o.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){h("error",t),this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n||(n=new r.Socket(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const t of e)if(this.nsps[t].active)return void h("socket %s is still active, skipping close",t);this._close()}_packet(t){h("writing packet %j",t);const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){h("cleanup"),this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){h("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){h("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)h("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();h("will wait %dms before reconnect attempt",e),this._reconnecting=!0;const n=setTimeout((()=>{t.skipReconnect||(h("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(h("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):(h("reconnect success"),t.onreconnect())})))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}e.Manager=l},657:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,n){return t.on(e,n),function(){t.off(e,n)}}},277:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const s=n(485),r=n(657),i=n(791),o=n(669)("socket.io-client:socket"),a=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class c extends i.StrictEventEmitter{constructor(t,e,n){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[r.on(t,"open",this.onopen.bind(this)),r.on(t,"packet",this.onpacket.bind(this)),r.on(t,"error",this.onerror.bind(this)),r.on(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(a.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const n={type:s.PacketType.EVENT,data:e,options:{}};n.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(o("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++);const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return!this.flags.volatile||r&&this.connected?this.connected?this.packet(n):this.sendBuffer.push(n):o("discard packet as the transport is not currently writable"),this.flags={},this}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){o("transport is open - connecting"),"function"==typeof this.auth?this.auth((t=>{this.packet({type:s.PacketType.CONNECT,data:t})})):this.packet({type:s.PacketType.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){o("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case s.PacketType.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case s.PacketType.EVENT:case s.PacketType.BINARY_EVENT:this.onevent(t);break;case s.PacketType.ACK:case s.PacketType.BINARY_ACK:this.onack(t);break;case s.PacketType.DISCONNECT:this.ondisconnect();break;case s.PacketType.CONNECT_ERROR:const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];o("emitting event %j",e),null!=t.id&&(o("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let n=!1;return function(...r){n||(n=!0,o("sending ack %j",r),e.packet({type:s.PacketType.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];"function"==typeof e?(o("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):o("bad ack %s",t.id)}onconnect(t){o("socket connected with id %s",t),this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>this.packet(t))),this.sendBuffer=[]}ondisconnect(){o("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(o("performing disconnect (%s)",this.nsp),this.packet({type:s.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}e.Socket=c},791:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StrictEventEmitter=void 0;const s=n(767);e.StrictEventEmitter=class extends s{on(t,e){return super.on(t,e),this}once(t,e){return super.once(t,e),this}emit(t,...e){return super.emit(t,...e),this}emitReserved(t,...e){return super.emit(t,...e),this}listeners(t){return super.listeners(t)}}},744:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;const s=n(187),r=n(669)("socket.io-client:url");e.url=function(t,e="",n){let i=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(r("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),r("parse %s",t),i=s(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}},669:(t,e,n)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let s=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(s++,"%c"===t&&(r=s))})),e.splice(r,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(231)(e);const{formatters:s}=t.exports;s.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},231:(t,e,n)=>{t.exports=function(t){function e(t){let n,r,i,o=null;function a(...t){if(!a.enabled)return;const s=a,r=Number(new Date),i=r-(n||r);s.diff=i,s.prev=n,s.curr=r,n=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,r)=>{if("%%"===n)return"%";o++;const i=e.formatters[r];if("function"==typeof i){const e=t[o];n=i.call(s,e),t.splice(o,1),o--}return n})),e.formatArgs.call(s,t),(s.log||e.log).apply(s,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=s,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==e.namespaces&&(r=e.namespaces,i=e.enabled(t)),i),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function s(t,n){const s=e(this.namespace+(void 0===n?":":n)+t);return s.log=this.log,s}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const s=("string"==typeof t?t:"").split(/[\s,]+/),r=s.length;for(n=0;n<r;n++)s[n]&&("-"===(t=s[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,s;for(n=0,s=e.skips.length;n<s;n++)if(e.skips[n].test(t))return!1;for(n=0,s=e.names.length;n<s;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(241),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},241:t=>{var e=1e3,n=60*e,s=60*n,r=24*s;function i(t,e,n,s){var r=e>=1.5*n;return Math.round(t/n)+" "+s+(r?"s":"")}t.exports=function(t,o){o=o||{};var a,c,h=typeof t;if("string"===h&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(i){var o=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===h&&isFinite(t))return o.long?(a=t,(c=Math.abs(a))>=r?i(a,c,r,"day"):c>=s?i(a,c,s,"hour"):c>=n?i(a,c,n,"minute"):c>=e?i(a,c,e,"second"):a+" ms"):function(t){var i=Math.abs(t);return i>=r?Math.round(t/r)+"d":i>=s?Math.round(t/s)+"h":i>=n?Math.round(t/n)+"m":i>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},719:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;const s=n(986);function r(t,e){if(!t)return t;if(s.isBinary(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=r(t[s],e);return n}if("object"==typeof t&&!(t instanceof Date)){const n={};for(const s in t)t.hasOwnProperty(s)&&(n[s]=r(t[s],e));return n}return t}function i(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=i(t[n],e);else if("object"==typeof t)for(const n in t)t.hasOwnProperty(n)&&(t[n]=i(t[n],e));return t}e.deconstructPacket=function(t){const e=[],n=t.data,s=t;return s.data=r(n,e),s.attachments=e.length,{packet:s,buffers:e}},e.reconstructPacket=function(t,e){return t.data=i(t.data,e),t.attachments=void 0,t}},485:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const s=n(767),r=n(719),i=n(986),o=n(618)("socket.io-parser");var a;e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(a=e.PacketType||(e.PacketType={})),e.Encoder=class{encode(t){return o("encoding packet %j",t),t.type!==a.EVENT&&t.type!==a.ACK||!i.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==a.BINARY_EVENT&&t.type!==a.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),o("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=r.deconstructPacket(t),n=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(n),s}};class c extends s{constructor(){super()}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===a.BINARY_EVENT||e.type===a.BINARY_ACK?(this.reconstructor=new h(e),0===e.attachments&&super.emit("decoded",e)):super.emit("decoded",e);else{if(!i.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emit("decoded",e))}}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(void 0===a[n.type])throw new Error("unknown packet type "+n.type);if(n.type===a.BINARY_EVENT||n.type===a.BINARY_ACK){const s=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const r=t.substring(s,e);if(r!=Number(r)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===t.charAt(e+1)){const s=e+1;for(;++e&&","!==t.charAt(e)&&e!==t.length;);n.nsp=t.substring(s,e)}else n.nsp="/";const s=t.charAt(e+1);if(""!==s&&Number(s)==s){const s=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}n.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){const s=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!c.isPayloadValid(n.type,s))throw new Error("invalid payload");n.data=s}return o("decoded %s as %j",t,n),n}static isPayloadValid(t,e){switch(t){case a.CONNECT:return"object"==typeof e;case a.DISCONNECT:return void 0===e;case a.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}e.Decoder=c;class h{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},986:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const n="function"==typeof ArrayBuffer,s=Object.prototype.toString,r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),i="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);function o(t){return n&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||r&&t instanceof Blob||i&&t instanceof File}e.isBinary=o,e.hasBinary=function t(e,n){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(t(e[n]))return!0;return!1}if(o(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return!0;return!1}},618:(t,e,n)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let s=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(s++,"%c"===t&&(r=s))})),e.splice(r,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(224)(e);const{formatters:s}=t.exports;s.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},224:(t,e,n)=>{t.exports=function(t){function e(t){let n,r,i,o=null;function a(...t){if(!a.enabled)return;const s=a,r=Number(new Date),i=r-(n||r);s.diff=i,s.prev=n,s.curr=r,n=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,r)=>{if("%%"===n)return"%";o++;const i=e.formatters[r];if("function"==typeof i){const e=t[o];n=i.call(s,e),t.splice(o,1),o--}return n})),e.formatArgs.call(s,t),(s.log||e.log).apply(s,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=s,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==e.namespaces&&(r=e.namespaces,i=e.enabled(t)),i),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function s(t,n){const s=e(this.namespace+(void 0===n?":":n)+t);return s.log=this.log,s}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const s=("string"==typeof t?t:"").split(/[\s,]+/),r=s.length;for(n=0;n<r;n++)s[n]&&("-"===(t=s[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,s;for(n=0,s=e.skips.length;n<s;n++)if(e.skips[n].test(t))return!1;for(n=0,s=e.names.length;n<s;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(896),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},896:t=>{var e=1e3,n=60*e,s=60*n,r=24*s;function i(t,e,n,s){var r=e>=1.5*n;return Math.round(t/n)+" "+s+(r?"s":"")}t.exports=function(t,o){o=o||{};var a,c,h=typeof t;if("string"===h&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(i){var o=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===h&&isFinite(t))return o.long?(a=t,(c=Math.abs(a))>=r?i(a,c,r,"day"):c>=s?i(a,c,s,"hour"):c>=n?i(a,c,n,"minute"):c>=e?i(a,c,e,"second"):a+" ms"):function(t){var i=Math.abs(t);return i>=r?Math.round(t/r)+"d":i>=s?Math.round(t/s)+"h":i>=n?Math.round(t/n)+"m":i>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},403:t=>{"use strict";var e,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s={},r=0,i=0;function o(t){var e="";do{e=n[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function a(){var t=o(+new Date);return t!==e?(r=0,e=t):t+"."+o(r++)}for(;i<64;i++)s[n[i]]=i;a.encode=o,a.decode=function(t){var e=0;for(i=0;i<t.length;i++)e=64*e+s[t.charAt(i)];return e},t.exports=a}},e={};function n(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,n),i.exports}(()=>{"use strict";function t(){}function e(t){return t()}function s(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t){return 0===Object.keys(t).length}function c(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}new Set;let h,l=!1;function u(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function m(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function y(t){return document.createTextNode(t)}function g(){return y(" ")}function v(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return""===t?null:+t}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function k(t,e){t.value=null==e?"":e}function C(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e)return void(s.selected=!0)}}function x(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function S(t){h=t}function E(){if(!h)throw new Error("Function called outside component initialization");return h}function A(t){E().$$.on_mount.push(t)}function T(){const t=E();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const r=function(t,e,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,!1,e),s}(e,n);s.slice().forEach((e=>{e.call(t,r)}))}}}new Set;const B=[],M=[],F=[],P=[],$=Promise.resolve();let N=!1;function R(t){F.push(t)}let W=!1;const O=new Set;function L(){if(!W){W=!0;do{for(let t=0;t<B.length;t+=1){const e=B[t];S(e),z(e.$$)}for(S(null),B.length=0;M.length;)M.pop()();for(let t=0;t<F.length;t+=1){const e=F[t];O.has(e)||(O.add(e),e())}F.length=0}while(B.length);for(;P.length;)P.pop()();N=!1,W=!1,O.clear()}}function z(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const j=new Set;let q,I;function D(t,e){t&&t.i&&(j.delete(t),t.i(e))}function H(t,e,n,s){if(t&&t.o){if(j.has(t))return;j.add(t),q.c.push((()=>{j.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function U(t,e){t.d(1),e.delete(t.key)}function Y(t,e,n,s,r,i,o,a,c,h,l,u){let p=t.length,f=i.length,d=p;const m={};for(;d--;)m[t[d].key]=d;const y=[],g=new Map,v=new Map;for(d=f;d--;){const t=u(r,i,d),a=n(t);let c=o.get(a);c?s&&c.p(t,e):(c=h(a,t),c.c()),g.set(a,y[d]=c),a in m&&v.set(a,Math.abs(d-m[a]))}const w=new Set,b=new Set;function _(t){D(t,1),t.m(a,l),o.set(t.key,t),l=t.first,f--}for(;p&&f;){const e=y[f-1],n=t[p-1],s=e.key,r=n.key;e===n?(l=e.first,p--,f--):g.has(r)?!o.has(s)||w.has(s)?_(e):b.has(r)?p--:v.get(s)>v.get(r)?(b.add(s),_(e)):(w.add(r),p--):(c(n,o),p--)}for(;p--;){const e=t[p];g.has(e.key)||c(e,o)}for(;f;)_(y[f-1]);return y}function X(t){t&&t.c()}function V(t,n,s,o){const{fragment:a,on_mount:c,on_destroy:h,after_update:l}=t.$$;a&&a.m(n,s),o||R((()=>{const n=c.map(e).filter(i);h?h.push(...n):r(n),t.$$.on_mount=[]})),l.forEach(R)}function K(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(e,n,i,o,a,c,u,p=[-1]){const d=h;S(e);const m=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:n.context||[]),callbacks:s(),dirty:p,skip_bound:!1,root:n.target||d.$$.root};u&&u(m.root);let y=!1;if(m.ctx=i?i(e,n.props||{},((t,n,...s)=>{const r=s.length?s[0]:n;return m.ctx&&a(m.ctx[t],m.ctx[t]=r)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](r),y&&function(t,e){-1===t.$$.dirty[0]&&(B.push(t),N||(N=!0,$.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],m.update(),y=!0,r(m.before_update),m.fragment=!!o&&o(m.ctx),n.target){if(n.hydrate){l=!0;const t=(g=n.target,Array.from(g.childNodes));m.fragment&&m.fragment.l(t),t.forEach(f)}else m.fragment&&m.fragment.c();n.intro&&D(e.$$.fragment),V(e,n.target,n.anchor,n.customElement),l=!1,L()}var g;S(d)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(I=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(i);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){r(this.$$.on_disconnect)}$destroy(){K(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class J{$destroy(){K(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Z=[];var Q,tt,et=n(751);et.Manager,et.Socket,function(t){t[t.Black=0]="Black",t[t.White=1]="White"}(Q||(Q={})),function(t){t[t.Empty=0]="Empty",t[t.White=1]="White",t[t.WhiteWest=2]="WhiteWest",t[t.WhiteEast=3]="WhiteEast",t[t.WhiteWin=4]="WhiteWin",t[t.Black=5]="Black",t[t.BlackNorth=6]="BlackNorth",t[t.BlackSouth=7]="BlackSouth",t[t.BlackWin=8]="BlackWin"}(tt||(tt={}));class nt{constructor(t,e){this.width=t,this.height=e,this.size=this.width*this.height,this.neighbor_list=new Int16Array(6*this.size),this.miai_neighbor_list=new Int16Array(6*this.size);for(let t=0;t<this.width;t++)for(let e=0;e<this.height;e++){const n=6*this.getIndex(t,e);this.neighbor_list[n+0]=e>0?this.getIndex(t,e-1):-1,this.neighbor_list[n+1]=e>0&&t<this.width-1?this.getIndex(t+1,e-1):-1,this.neighbor_list[n+2]=t<this.width-1?this.getIndex(t+1,e):-1,this.neighbor_list[n+3]=e<this.height-1?this.getIndex(t,e+1):-1,this.neighbor_list[n+4]=t>0&&e<this.height-1?this.getIndex(t-1,e+1):-1,this.neighbor_list[n+5]=t>0?this.getIndex(t-1,e):-1}for(let t=0;t<this.width;t++)for(let e=0;e<this.height;e++){const n=6*this.getIndex(t,e);0===e||t===this.width-1?this.miai_neighbor_list[n+0]=-5:this.miai_neighbor_list[n+0]=1===e?-1:this.getIndex(t+1,e-2),t===this.width-1||0===e?this.miai_neighbor_list[n+1]=-5:t===this.width-2?this.miai_neighbor_list[n+1]=-4:this.miai_neighbor_list[n+1]=this.getIndex(t+2,e-1),t===this.width-1||e===this.height-1?this.miai_neighbor_list[n+2]=-5:this.miai_neighbor_list[n+2]=this.getIndex(t+1,e+1),e===this.height-1||0===t?this.miai_neighbor_list[n+3]=-5:e===this.height-2?this.miai_neighbor_list[n+3]=-2:this.miai_neighbor_list[n+3]=this.getIndex(t-1,e+2),0===t||e===this.height-1?this.miai_neighbor_list[n+4]=-5:this.miai_neighbor_list[n+4]=1===t?-3:this.getIndex(t-2,e+1),this.miai_neighbor_list[n+5]=0===t||0===e?-5:this.getIndex(t-1,e-1)}}getIndex(t,e){return e*this.width+t}getXY(t){return[t%this.width,Math.floor(t/this.width)]}dfs(t,e,n,s){for(let r=0;r<6;r++){const i=this.neighbor_list[6*e+r];t[i]===n&&(t[i]=s,this.dfs(t,i,n,s))}}move(t,e,n){switch(e){case Q.Black:{let e=!1,s=!1;n<this.width?e=!0:n>=this.size-this.width&&(s=!0);for(let r=0;r<6;r++){const i=this.neighbor_list[6*n+r];t[i]===tt.BlackNorth?e=!0:t[i]===tt.BlackSouth&&(s=!0)}if(e&&s)return t[n]=tt.BlackWin,!0;e?(t[n]=tt.BlackNorth,this.dfs(t,n,tt.Black,tt.BlackNorth)):s?(t[n]=tt.BlackSouth,this.dfs(t,n,tt.Black,tt.BlackSouth)):t[n]=tt.Black;break}case Q.White:{let e=!1,s=!1;n%this.width==0?e=!0:n%this.width==this.width-1&&(s=!0);for(let r=0;r<6;r++){const i=this.neighbor_list[6*n+r];t[i]===tt.WhiteWest?e=!0:t[i]===tt.WhiteEast&&(s=!0)}if(e&&s)return t[n]=tt.WhiteWin,!0;e?(t[n]=tt.WhiteWest,this.dfs(t,n,tt.White,tt.WhiteWest)):s?(t[n]=tt.WhiteEast,this.dfs(t,n,tt.White,tt.WhiteEast)):t[n]=tt.White;break}}return!1}miaiConnectivityDfs(t,e,n,s){for(let r=0;r<6;r++){const i=this.neighbor_list[6*e+r];t[i]===n&&(t[i]=s,this.dfs(t,i,n,s))}for(let r=0;r<6;r++){const i=this.miai_neighbor_list[6*e+r];if(i>=0&&t[i]===n){const o=this.neighbor_list[6*e+r],a=this.neighbor_list[6*e+(r+1)%6];o===tt.Empty&&a===tt.Empty&&(t[i]=s,this.dfs(t,i,n,s))}}}miaiConnectivityMove(t,e,n,s){switch(n){case Q.Black:{let n=!1,r=!1;s<this.width?n=!0:s>=this.size-this.width&&(r=!0);for(let i=0;i<6;i++){const o=this.neighbor_list[6*s+i];-1!==o&&(t[o]===tt.BlackNorth?n=!0:t[o]===tt.BlackSouth&&(r=!0));const a=this.miai_neighbor_list[6*s+i];if(-5!==a){const o=this.neighbor_list[6*s+i],c=this.neighbor_list[6*s+(i+1)%6];if(-1!==o&&-1!==c&&t[o]===tt.Empty&&t[c]===tt.Empty)if(a>=0){switch(t[a]){case tt.Black:case tt.BlackNorth:case tt.BlackSouth:case tt.BlackWin:e[o]=c,e[c]=o}switch(t[a]){case tt.BlackNorth:n=!0;break;case tt.BlackSouth:r=!0}}else-1===a?(n=!0,e[o]=c,e[c]=o):-2===a&&(r=!0,e[o]=c,e[c]=o)}}if(n&&r)return t[s]=tt.BlackWin,!0;n?(t[s]=tt.BlackNorth,this.miaiConnectivityDfs(t,s,tt.Black,tt.BlackNorth)):r?(t[s]=tt.BlackSouth,this.miaiConnectivityDfs(t,s,tt.Black,tt.BlackSouth)):t[s]=tt.Black;break}case Q.White:{let n=!1,r=!1;s%this.width==0?n=!0:s%this.width==this.width-1&&(r=!0);for(let i=0;i<6;i++){const o=this.neighbor_list[6*s+i];-1!==o&&(t[o]===tt.WhiteWest?n=!0:t[o]===tt.WhiteEast&&(r=!0));const a=this.miai_neighbor_list[6*s+i];if(-5!==a){const o=this.neighbor_list[6*s+i],c=this.neighbor_list[6*s+(i+1)%6];if(-1!==o&&-1!==c&&t[o]===tt.Empty&&t[c]===tt.Empty)if(a>=0){switch(t[a]){case tt.White:case tt.WhiteWest:case tt.WhiteEast:case tt.WhiteWin:e[o]=c,e[c]=o}switch(t[a]){case tt.WhiteWest:n=!0;break;case tt.WhiteEast:r=!0}}else-3===a?(n=!0,e[o]=c,e[c]=o):-4===a&&(r=!0,e[o]=c,e[c]=o)}}if(n&&r)return t[s]=tt.WhiteWin,!0;n?(t[s]=tt.WhiteWest,this.miaiConnectivityDfs(t,s,tt.White,tt.WhiteWest)):r?(t[s]=tt.WhiteEast,this.miaiConnectivityDfs(t,s,tt.White,tt.WhiteEast)):t[s]=tt.White;break}}return!1}}const st=t=>t===Q.Black?Q.White:Q.Black,rt=t=>{switch(t){case tt.Empty:return tt.Empty;case tt.Black:case tt.BlackNorth:case tt.BlackSouth:case tt.BlackWin:return tt.Black;case tt.White:case tt.WhiteEast:case tt.WhiteWest:case tt.WhiteWin:return tt.White}};class it{constructor(t,e,n,s){this.children=[],this.numSims=0,this.numWins=0,this.win=!1,this.lastPlayer=t,this.lastMove=e,this.state=n,this.win=s||!1}isLeaf(){return 0===this.children.length}updateStats(t,e=1){this.numSims+=e,this.numWins+=t}ucb_eval(t){return t.numWins/t.numSims+1*Math.sqrt(Math.log(this.numSims)/t.numSims)}}class ot{constructor(t){this.hexBoard=t}getHexMove(t,e,n){this.rootNode=new it(st(e),n||-1,t.slice());for(let t=0;t<1e3;t++){const[t,e]=this.select(this.rootNode),[n,s]=this.evaluateLeaf(t);this.backpropagate(e,n,s)}let s=0,r=-1/0;for(const t of this.rootNode.children){let e=t.numWins/t.numSims;e>r&&(r=e,s=t.lastMove)}return s}select(t){let e=t,n=[e];for(;!e.isLeaf();){let t,s=-1/0;for(const n of e.children){let r=e.ucb_eval(n);r>s&&(s=r,t=n)}e=t,n.push(e)}return[e,n]}evaluateLeaf(t){let e=0,n=0;if(t.win)e+=10,n+=10;else for(let s=0;s<this.hexBoard.size;s++)if(t.state[s]===tt.Empty){let r=t.state.slice(),i=st(t.lastPlayer),o=this.hexBoard.move(r,i,s),a=new it(i,s,r,o);if(o)a.updateStats(1),e+=1,n-=1;else for(let t=0;t<3;t++)this.rollout(a.state.slice(),i)!==i?(a.updateStats(-1),e+=1,n+=1):(a.updateStats(1),e+=1,n-=1);t.children.push(a)}return[e,n]}backpropagate(t,e,n){let s=1;for(const r of t.reverse())r.updateStats(n*s,e),s*=-1}rollout(t,e){const n=[];for(let e=0;e<this.hexBoard.size;e++)t[e]===tt.Empty&&n.push(e);at(n);for(const s of n)if(e=st(e),this.hexBoard.move(t,e,s))return e}}const at=t=>{for(let e=t.length;0!==e;){let n=Math.floor(Math.random()*e);e--,[t[e],t[n]]=[t[n],t[e]]}return t};class ct{constructor(t){this.hexBoard=t}move(t,e){const n=[];for(let e=0;e<this.hexBoard.size;e++)t[e]===tt.Empty&&n.push(e);return n[Math.floor(Math.random()*n.length)]}getHexMove(t,e){return this.move(t,e)}getDarkHexMove(t,e){return this.move(t,e)}getReverseHexMove(t,e){return this.move(t,e)}getDarkReverseHexMove(t,e){return this.move(t,e)}}class ht{constructor(t){this.hexBoard=t}getHexMove(t,e){const n=[];for(let e=0;e<this.hexBoard.size;e++)t[e]===tt.Empty&&n.push(e);const s=new Array(this.hexBoard.size).fill(0);for(let r=0;r<1e4;r++){const r=t.slice();let i=e;const o=n.slice();lt(o);for(const t of o){if(this.hexBoard.move(r,i,t)){i===e&&(s[t]+=1);break}i=st(i)}}let r=-1,i=0;for(const t of n)s[t]>r&&(i=t,r=s[t]);return i}}const lt=t=>{for(let e=t.length;0!==e;){let n=Math.floor(Math.random()*e);e--,[t[e],t[n]]=[t[n],t[e]]}return t};class ut{constructor(t,e,n,s){this.children=[],this.numSims=0,this.numWins=0,this.ucbVal=.5,this.lastPlayer=t,this.lastMove=e,this.state=n,this.reply=s}isLeaf(){return 0===this.children.length}updateStats(t,e=1){this.numSims+=e,this.numWins+=t}ucb_eval(t){return t.numWins/t.numSims+1*Math.sqrt(Math.log(this.numSims)/t.numSims)}}class pt{constructor(t){this.hexBoard=t,this.miaiConnectivity=new Uint8Array(t.size).fill(tt.Empty)}getHexMove(t,e){this.upperNode=new ut(e,-1,t.slice(),new Int16Array(this.hexBoard.size).fill(-1)),this.rootNode=new ut(st(e),-1,t.slice(),new Int16Array(this.hexBoard.size).fill(-1));for(const[t,e]of this.rootNode.state.entries()){let n;switch(e){case tt.Black:case tt.BlackNorth:case tt.BlackSouth:case tt.BlackWin:n=Q.Black;break;case tt.White:case tt.WhiteEast:case tt.WhiteWest:case tt.WhiteWin:n=Q.White;break;default:n=void 0}void 0!==n&&(n===this.rootNode.lastPlayer?this.hexBoard.miaiConnectivityMove(this.rootNode.state,this.rootNode.reply,n,t):this.hexBoard.miaiConnectivityMove(this.upperNode.state,this.upperNode.reply,n,t))}for(let t=0;t<2e3;t++){const t=this.select(this.rootNode);this.evaluateLeaf(t)}let n,s=-1/0;for(const t of this.rootNode.children){let e=t.numWins/t.numSims;e>s&&(s=e,n=t.lastMove)}return void 0===n&&(n=this.rootNode.children[0].lastMove),n}select(t){let e=t,n=[e];for(;!e.isLeaf();){let t,s=-1/0;for(const n of e.children){let e=n.ucbVal;e>s&&(s=e,t=n)}void 0===t&&(t=e.children[0]),e=t,n.push(e)}return n}evaluateLeaf(t){let e=t[t.length-1],n=0,s=0;if(e.numWins===1/0)n+=5,s+=5;else{let r,i=[];for(let t=0;t<this.hexBoard.size;t++)e.state[t]===tt.Empty&&i.push(t);if(t.length>=2){r=t[t.length-2];let n=r.reply[e.lastMove];-1!==n&&(i=[n])}else r=this.upperNode;let o=r.reply.slice();for(const[t,n]of e.state.entries())-1!==o[t]&&n!==tt.Empty&&(o[o[t]]=-1,o[t]=0);for(const t of i){let r=e.state.slice(),i=st(e.lastPlayer),a=o.slice(),c=this.hexBoard.miaiConnectivityMove(r,a,i,t),h=new ut(i,t,r,a);if(e.children.push(h),c){h.updateStats(1/0),n+=1,s-=1/0;break}for(let t=0;t<3;t++)this.rollout(h.state.slice(),i)===i?(h.updateStats(1),n+=1,s-=1):(h.updateStats(-1),n+=1,s+=1)}}e.updateStats(s,n);for(const t of e.children)t.ucbVal=e.ucb_eval(t);s===-1/0&&(n=5,s=-5);let r=-1,i=e;for(const e of t.reverse().slice(1))e.updateStats(s*r,n),i.ucbVal=e.ucb_eval(i),i=e,r*=-1}rollout(t,e){const n=[];for(let e=0;e<this.hexBoard.size;e++)t[e]===tt.Empty&&n.push(e);ft(n);for(const s of n)if(e=st(e),this.hexBoard.move(t,e,s))return e}}const ft=t=>{for(let e=t.length;0!==e;){let n=Math.floor(Math.random()*e);e--,[t[e],t[n]]=[t[n],t[e]]}return t};var dt,mt,yt,gt;!function(t){t.Local="local",t.Remote="remote",t.Random="random",t.MostWinningCell="most-winning-cell",t.MCTS="mcts",t.Miai="miai"}(dt||(dt={})),function(t){t.Local="local",t.Remote="remote",t.Random="random"}(mt||(mt={}));class vt{constructor(t,e){this.type=t,this.ai=e}}class wt{constructor({width:t,height:e,reverse:n,swapRule:s,playerTypes:r,serverAddress:i},o,a){this.players=Array(2).fill(null),this.messages=[],this.started=!1,this.quited=!1,this.paused=!1,this.loading=!1,this.onUpdateCallback=o,t!==e&&(s=!1),this.options={width:t,height:e,reverse:n,swapRule:s,playerTypes:r,serverAddress:i},this.hexBoard=new nt(t,e),this.currentState=new Uint8Array(this.hexBoard.size).fill(tt.Empty),this.currentPlayer=Q.Black,this.history=[{state:this.currentState.slice()}];let c=!1;if(this.options.reverse)for(let t=0;t<r.length;t++)switch(r[t]){case dt.Random:this.players[t]=new vt(dt.Random,new ct(this.hexBoard));break;case dt.Remote:this.players[t]=new vt(dt.Remote),c=!0;break;case dt.Local:this.players[t]=new vt(dt.Local)}else for(let t=0;t<r.length;t++)switch(r[t]){case dt.Random:this.players[t]=new vt(dt.Random,new ct(this.hexBoard));break;case dt.MostWinningCell:this.players[t]=new vt(dt.MostWinningCell,new ht(this.hexBoard));break;case dt.MCTS:this.players[t]=new vt(dt.MCTS,new ot(this.hexBoard));break;case dt.Miai:this.players[t]=new vt(dt.Miai,new pt(this.hexBoard));break;case dt.Remote:this.players[t]=new vt(dt.Remote),c=!0;break;case dt.Local:this.players[t]=new vt(dt.Local)}c?this.socket_connect(a):this.started=!0,this.next_play()}socket_connect(t){if(t)this.messages.push({source:"game",message:`Game: ${this.options.reverse?"Reverse ":""}Hex\nWidth: ${this.options.width}\nHeigth: ${this.options.height}\nSwap rule: ${this.options.swapRule?"True":"False"}`}),this.messages.push({source:"game",message:"You are player "+("local"===this.options.playerTypes[0]?"red":"blue")});else{const e=new URL("/hex",this.options.serverAddress);(t=et(e.toString(),{query:{options:JSON.stringify(this.options)},reconnection:!1})).on("joined",(t=>{this.inviteLink=t,this.messages.push({source:"link",message:t}),this.messages.push({source:"game",message:"You are player "+("local"===this.options.playerTypes[0]?"red":"blue")}),this.onUpdateCallback(this)}))}this.socket=t,this.socket.once("disconnect",(()=>{this.quit()})),this.socket.on("connect_error",(()=>{this.quit()})),this.socket.on("started",(()=>{this.start()})),this.socket.on("move",(t=>{t.player===this.currentPlayer&&"remote"===this.options.playerTypes[t.player]&&this.currentState[t.pos]===tt.Empty?this.move(t.pos):this.quit()})),this.socket.on("swap",(()=>{this.options.swapRule&&2===this.history.length?this.swap():this.quit})),this.socket.on("message",(t=>{this.messages.push(t),this.onUpdateCallback(this)}))}sendMessage(t){if(this.socket&&this.socket.connected&&this.started){const e={source:"local"===this.options.playerTypes[0]?"red":"blue",message:t};this.messages.push(e),this.socket.emit("message",e),this.onUpdateCallback(this)}}start(){this.started=!0,this.messages.push({source:"game",message:"Game started"}),this.onUpdateCallback(this)}quit(){var t;this.quited=!0,this.messages.push({source:"game",message:"A player has quit or disconnected"}),null===(t=this.socket)||void 0===t||t.disconnect(),this.onUpdateCallback(this)}play(){this.paused=!1,this.onUpdateCallback(this),this.next_play()}pause(){this.paused=!0,this.onUpdateCallback(this)}step_back(){this.loading||this.history.length>=2&&(this.history.pop(),this.currentState=this.history[this.history.length-1].state.slice(),this.currentPlayer=st(this.currentPlayer),this.win=this.history[this.history.length-1].win,this.onUpdateCallback(this))}step_forward(){this.loading||this.next_play()}local_move(t){var e;this.started&&!this.quited&&void 0===this.win&&(null===(e=this.players[this.currentPlayer])||void 0===e?void 0:e.type)===dt.Local&&t>=0&&t<this.hexBoard.size&&this.currentState[t]===tt.Empty&&(this.socket&&this.socket.emit("move",{player:this.currentPlayer,pos:t}),this.move(t))}move(t){this.hexBoard.move(this.currentState,this.currentPlayer,t)&&(this.options.reverse?this.win=st(this.currentPlayer):this.win=this.currentPlayer),this.history.push({state:this.currentState.slice(),last_player:this.currentPlayer,last_move:t,win:this.win}),this.currentPlayer=st(this.currentPlayer),this.onUpdateCallback(this),this.paused||this.next_play()}next_play(){setTimeout((async()=>{if(void 0===this.win){const t=this.players[this.currentPlayer];if(null==t?void 0:t.ai){let e,n=Date.now();this.loading=!0,e=this.options.reverse?t.ai.getReverseHexMove(this.currentState,this.currentPlayer):t.ai.getHexMove(this.currentState,this.currentPlayer),await new Promise((t=>setTimeout(t,100-(Date.now()-n)))),this.move(e),this.loading=!1}}}),10)}local_swap(){var t;this.started&&!this.quited&&void 0===this.win&&(null===(t=this.players[this.currentPlayer])||void 0===t?void 0:t.type)===dt.Local&&this.options.swapRule&&2===this.history.length&&(this.socket&&this.socket.emit("swap"),this.swap())}swap(){const t=this.history[1].last_move;this.currentState[t]=tt.Empty;const[e,n]=this.hexBoard.getXY(t),s=this.hexBoard.getIndex(n,e);this.hexBoard.move(this.currentState,this.currentPlayer,s),this.history.push({state:this.currentState.slice(),last_player:this.currentPlayer,last_move:t,swap:!0}),this.currentPlayer=st(this.currentPlayer),this.onUpdateCallback(this)}}!function(t){t.Local="local",t.Remote="remote",t.Random="random"}(yt||(yt={})),function(t){t.Local="local",t.Remote="remote",t.Random="random"}(gt||(gt={}));class bt{constructor(t,e){this.type=t,this.ai=e}}class _t{constructor({width:t,height:e,reverse:n,swapRule:s,playerTypes:r,serverAddress:i},o,a){if(this.players=Array(2).fill(null),this.visibleBoards=Array(2).fill(null),this.messages=[],this.started=!1,this.quited=!1,this.pending=!1,this.paused=!1,this.loading=!1,this.onUpdateCallback=o,this.options={width:t,height:e,reverse:n,swapRule:s,playerTypes:r,serverAddress:i},this.hexBoard=new nt(t,e),this.currentPlayer=Q.Black,this.options.reverse)for(let t=0;t<r.length;t++)switch(r[t]){case yt.Random:this.players[t]=new bt(yt.Random,new ct(this.hexBoard));break;case yt.Remote:this.players[t]=new bt(yt.Remote);break;case yt.Local:this.players[t]=new bt(yt.Local)}else for(let t=0;t<r.length;t++)switch(r[t]){case yt.Random:this.players[t]=new bt(yt.Random,new ct(this.hexBoard));break;case yt.Remote:this.players[t]=new bt(yt.Remote);break;case yt.Local:this.players[t]=new bt(yt.Local)}let c=!1;for(let n=0;n<r.length;n++)"remote"===r[n]?c=!0:this.visibleBoards[n]=new Uint8Array(t*e);c?this.socket_connect(a):(this.currentState=new Uint8Array(this.hexBoard.size).fill(tt.Empty),this.history=[{state:this.currentState.slice(),black_visible_board:this.visibleBoards[0].slice(),white_visible_board:this.visibleBoards[1].slice()}],this.started=!0),this.next_play()}socket_connect(t){if(t)this.messages.push({source:"game",message:`Game: Dark ${this.options.reverse?"Reverse ":""}Hex\nWidth: ${this.options.width}\nHeigth: ${this.options.height}\nSwap rule: ${this.options.swapRule?"True":"False"}`}),this.messages.push({source:"game",message:"You are player "+("local"===this.options.playerTypes[0]?"red":"blue")});else{const e=new URL("/darkhex",this.options.serverAddress);(t=et(e.toString(),{query:{options:JSON.stringify(this.options)},reconnection:!1})).on("joined",(t=>{this.inviteLink=t,this.messages.push({source:"link",message:t}),this.messages.push({source:"game",message:"You are player "+("local"===this.options.playerTypes[0]?"red":"blue")}),this.onUpdateCallback(this)}))}this.socket=t,this.socket.once("disconnect",(()=>{this.quit()})),this.socket.on("connect_error",(()=>{this.quit()})),this.socket.on("started",(()=>{this.start()})),this.socket.on("move",(({state:t,pos:e,switchColor:n})=>{this.remote_move({state:t,pos:e,switchColor:n})})),this.socket.on("win",(({win:t,board:e})=>{this.win=t,this.currentState=new Uint8Array(e),this.onUpdateCallback(this)})),this.socket.on("message",(t=>{this.messages.push(t),this.onUpdateCallback(this)}))}sendMessage(t){if(this.socket){const e={source:"local"===this.options.playerTypes[0]?"red":"blue",message:t};this.messages.push(e),this.socket.emit("message",e),this.onUpdateCallback(this)}}start(){this.started=!0,this.messages.push({source:"game",message:"Game started"}),this.onUpdateCallback(this)}quit(){var t;this.quited=!0,this.messages.push({source:"game",message:"A player has quit or disconnected"}),null===(t=this.socket)||void 0===t||t.disconnect(),this.onUpdateCallback(this)}play(){this.paused=!1,this.onUpdateCallback(this),this.next_play()}pause(){this.paused=!0,this.onUpdateCallback(this)}step_back(){!this.loading&&this.history&&this.history.length>=2&&(this.history.pop(),this.currentState=this.history[this.history.length-1].state.slice(),this.visibleBoards[0]=this.history[this.history.length-1].black_visible_board.slice(),this.visibleBoards[1]=this.history[this.history.length-1].white_visible_board.slice(),this.currentPlayer=st(this.currentPlayer),this.win=this.history[this.history.length-1].win,this.onUpdateCallback(this))}step_forward(){this.loading||this.next_play()}local_move(t){var e;!this.started||this.quited||void 0!==this.win||this.pending||"local"===(null===(e=this.players[this.currentPlayer])||void 0===e?void 0:e.type)&&t>=0&&t<this.hexBoard.size&&this.visibleBoards[this.currentPlayer][t]===tt.Empty&&(this.socket?(this.pending=!0,this.socket.emit("move",{player:this.currentPlayer,pos:t})):this.move(t))}remote_move({state:t,pos:e,switchColor:n}){this.pending=!1,void 0!==e&&(this.visibleBoards[this.currentPlayer][e]=t),n&&(this.currentPlayer=st(this.currentPlayer)),this.onUpdateCallback(this)}move(t){var e;let n=!1;this.currentState[t]===tt.Empty?(n=this.hexBoard.move(this.currentState,this.currentPlayer,t),this.visibleBoards[this.currentPlayer][t]=rt(this.currentState[t]),n&&(this.options.reverse?this.win=st(this.currentPlayer):this.win=this.currentPlayer),null===(e=this.history)||void 0===e||e.push({state:this.currentState.slice(),black_visible_board:this.visibleBoards[0].slice(),white_visible_board:this.visibleBoards[1].slice(),last_player:this.currentPlayer,last_move:t,win:this.win}),this.currentPlayer=st(this.currentPlayer)):this.visibleBoards[this.currentPlayer][t]=rt(this.currentState[t]),this.onUpdateCallback(this),this.paused||this.next_play()}next_play(){setTimeout((async()=>{if(void 0===this.win){const t=this.players[this.currentPlayer];if(null==t?void 0:t.ai){let e,n=Date.now();this.loading=!0,e=this.options.reverse?t.ai.getDarkReverseHexMove(this.visibleBoards[this.currentPlayer],this.currentPlayer):t.ai.getDarkHexMove(this.visibleBoards[this.currentPlayer],this.currentPlayer),await new Promise((t=>setTimeout(t,100-(Date.now()-n)))),this.move(e),this.loading=!1}}}),10)}}function kt(t,e,n){const s=t.slice();return s[14]=e[n],s}function Ct(t,e,n){const s=t.slice();return s[14]=e[n],s}function xt(t,e){let n,s,r,i=e[14]+"";return{key:t,first:null,c(){n=d("option"),s=y(i),n.__value=r=e[14],n.value=n.__value,w(n,"class","svelte-l2fgu4"),this.first=n},m(t,e){p(t,n,e),u(n,s)},p(t,o){e=t,4&o&&i!==(i=e[14]+"")&&_(s,i),4&o&&r!==(r=e[14])&&(n.__value=r,n.value=n.__value)},d(t){t&&f(n)}}}function St(t,e){let n,s,r,i=e[14]+"";return{key:t,first:null,c(){n=d("option"),s=y(i),n.__value=r=e[14],n.value=n.__value,w(n,"class","svelte-l2fgu4"),this.first=n},m(t,e){p(t,n,e),u(n,s)},p(t,o){e=t,4&o&&i!==(i=e[14]+"")&&_(s,i),4&o&&r!==(r=e[14])&&(n.__value=r,n.value=n.__value)},d(t){t&&f(n)}}}function Et(e){let n,s,i,o,a,c,h,l,m,_,x,S,E,A,T,B,M,F,P,$,N,W,O,L,z,j,q,I,D,H,X,V,K,G,J,Z,Q,tt,et=[],nt=new Map,st=[],rt=new Map,it=Object.values(e[2]);const ot=t=>t[14];for(let t=0;t<it.length;t+=1){let n=Ct(e,it,t),s=ot(n);nt.set(s,et[t]=xt(s,n))}let at=Object.values(e[2]);const ct=t=>t[14];for(let t=0;t<at.length;t+=1){let n=kt(e,at,t),s=ct(n);rt.set(s,st[t]=St(s,n))}return{c(){n=d("div"),s=d("h2"),s.textContent="Hex Online",i=g(),o=d("form"),a=d("select"),c=d("option"),c.textContent="Hex",h=d("option"),h.textContent="Dark Hex ",l=d("option"),l.textContent="Reverse Hex ",m=d("option"),m.textContent="Dark Reverse Hex",_=g(),x=d("label"),S=y("Width\n      "),E=d("input"),A=g(),T=d("label"),B=y("Height\n      "),M=d("input"),F=g(),P=d("label"),$=y("Swap rule\n      "),N=d("input"),O=g(),L=d("label"),z=y("Player red\n      "),j=d("select");for(let t=0;t<et.length;t+=1)et[t].c();q=g(),I=d("label"),D=y("Player blue\n      "),H=d("select");for(let t=0;t<st.length;t+=1)st[t].c();X=g(),V=d("label"),K=y("Server address\n      "),G=d("input"),J=g(),Z=d("button"),Z.textContent="New game",w(s,"class","svelte-l2fgu4"),c.__value="hex",c.value=c.__value,w(c,"class","svelte-l2fgu4"),h.__value="dark hex",h.value=h.__value,w(h,"title","Players cannot see each others moves"),w(h,"class","svelte-l2fgu4"),l.__value="reverse hex",l.value=l.__value,w(l,"title","First player to connect their sides loses"),w(l,"class","svelte-l2fgu4"),m.__value="dark reverse hex",m.value=m.__value,w(m,"title","Dark Hex + Reverse Hex"),w(m,"class","svelte-l2fgu4"),w(a,"class","svelte-l2fgu4"),void 0===e[0]&&R((()=>e[4].call(a))),w(E,"type","number"),w(E,"min","2"),w(E,"max","32"),w(E,"class","svelte-l2fgu4"),w(x,"class","svelte-l2fgu4"),w(M,"type","number"),w(M,"min","2"),w(M,"max","32"),w(M,"class","svelte-l2fgu4"),w(T,"class","svelte-l2fgu4"),w(N,"type","checkbox"),N.disabled=W=e[1].width!==e[1].height||e[1].dark,w(N,"class","svelte-l2fgu4"),w(P,"class","svelte-l2fgu4"),w(j,"class","svelte-l2fgu4"),void 0===e[1].playerTypes[0]&&R((()=>e[8].call(j))),w(L,"class","svelte-l2fgu4"),w(H,"class","svelte-l2fgu4"),void 0===e[1].playerTypes[1]&&R((()=>e[9].call(H))),w(I,"class","svelte-l2fgu4"),w(G,"type","text"),w(G,"class","svelte-l2fgu4"),w(V,"class","svelte-l2fgu4"),w(Z,"type","submit"),w(Z,"class","svelte-l2fgu4"),w(o,"class","svelte-l2fgu4"),w(n,"class","container svelte-l2fgu4")},m(t,r){p(t,n,r),u(n,s),u(n,i),u(n,o),u(o,a),u(a,c),u(a,h),u(a,l),u(a,m),C(a,e[0]),u(o,_),u(o,x),u(x,S),u(x,E),k(E,e[1].width),u(o,A),u(o,T),u(T,B),u(T,M),k(M,e[1].height),u(o,F),u(o,P),u(P,$),u(P,N),N.checked=e[1].swapRule,u(o,O),u(o,L),u(L,z),u(L,j);for(let t=0;t<et.length;t+=1)et[t].m(j,null);C(j,e[1].playerTypes[0]),u(o,q),u(o,I),u(I,D),u(I,H);for(let t=0;t<st.length;t+=1)st[t].m(H,null);var f;C(H,e[1].playerTypes[1]),u(o,X),u(o,V),u(V,K),u(V,G),k(G,e[1].serverAddress),u(o,J),u(o,Z),Q||(tt=[v(a,"change",e[4]),v(E,"input",e[5]),v(M,"input",e[6]),v(N,"change",e[7]),v(j,"change",e[8]),v(H,"change",e[9]),v(G,"input",e[10]),v(o,"submit",(f=e[3],function(t){return t.preventDefault(),f.call(this,t)}))],Q=!0)},p(t,[e]){1&e&&C(a,t[0]),6&e&&b(E.value)!==t[1].width&&k(E,t[1].width),6&e&&b(M.value)!==t[1].height&&k(M,t[1].height),6&e&&W!==(W=t[1].width!==t[1].height||t[1].dark)&&(N.disabled=W),6&e&&(N.checked=t[1].swapRule),4&e&&(it=Object.values(t[2]),et=Y(et,e,ot,1,t,it,nt,j,U,xt,null,Ct)),6&e&&C(j,t[1].playerTypes[0]),4&e&&(at=Object.values(t[2]),st=Y(st,e,ct,1,t,at,rt,H,U,St,null,kt)),6&e&&C(H,t[1].playerTypes[1]),6&e&&G.value!==t[1].serverAddress&&k(G,t[1].serverAddress)},i:t,o:t,d(t){t&&f(n);for(let t=0;t<et.length;t+=1)et[t].d();for(let t=0;t<st.length;t+=1)st[t].d();Q=!1,r(tt)}}}function At(t,e,n){const s=T();var r;!function(t){t.Hex="hex",t.DarkHex="dark hex",t.ReverseHex="reverse hex",t.DarkReverseHex="dark reverse hex"}(r||(r={}));let i=r.Hex,o={dark:!1,reverse:!1,width:5,height:5,swapRule:!1,playerTypes:[dt.Local,dt.Local],serverAddress:"http://localhost:4322"},a=dt;return t.$$.update=()=>{2&t.$$.dirty&&(o.width!==o.height||o.dark)&&n(1,o.swapRule=!1,o),1&t.$$.dirty&&(t=>{switch(t){case r.Hex:n(2,a=dt),n(1,o.playerTypes=[dt.Local,dt.Local],o),n(1,o.dark=!1,o),n(1,o.reverse=!1,o);break;case r.DarkHex:n(2,a=yt),n(1,o.playerTypes=[yt.Local,yt.Local],o),n(1,o.dark=!0,o),n(1,o.reverse=!1,o);break;case r.ReverseHex:n(2,a=mt),n(1,o.playerTypes=[mt.Local,mt.Local],o),n(1,o.dark=!1,o),n(1,o.reverse=!0,o);break;case r.DarkReverseHex:n(2,a=gt),n(1,o.playerTypes=[gt.Local,gt.Local],o),n(1,o.dark=!0,o),n(1,o.reverse=!0,o)}})(i)},[i,o,a,()=>{"remote"!==o.playerTypes[0]&&"remote"!==o.playerTypes[1]||"local"===o.playerTypes[0]&&"remote"===o.playerTypes[1]||"local"===o.playerTypes[1]&&"remote"===o.playerTypes[0]?s("submit",o):alert("You must have one local and one remote")},function(){i=x(this),n(0,i)},function(){o.width=b(this.value),n(1,o),n(2,a)},function(){o.height=b(this.value),n(1,o),n(2,a)},function(){o.swapRule=this.checked,n(1,o),n(2,a)},function(){o.playerTypes[0]=x(this),n(1,o),n(2,a)},function(){o.playerTypes[1]=x(this),n(1,o),n(2,a)},function(){o.serverAddress=this.value,n(1,o),n(2,a)}]}const Tt=class extends J{constructor(t){super(),G(this,t,At,Et,o,{})}};function Bt(e){let n,s,r,i;return{c(){n=d("div"),s=d("canvas"),w(s,"class","svelte-munglq"),w(n,"class","container svelte-munglq")},m(t,o){var a;p(t,n,o),u(n,s),e[5](s),r||(i=v(s,"click",(a=e[1],function(t){return t.stopPropagation(),a.call(this,t)})),r=!0)},p:t,i:t,o:t,d(t){t&&f(n),e[5](null),r=!1,i()}}}let Mt="lightgray";function Ft(t,e,n){const s=T(),r=Math.sqrt(3),i=Math.sqrt(3)/2,o=[{x:0,y:1/r},{x:.5,y:.5/r},{x:.5,y:-.5/r},{x:0,y:-1/r},{x:-.5,y:-.5/r},{x:-.5,y:.5/r}];let a,c,h,l,u,{boardWidth:p}=e,{boardHeight:f}=e,{hexState:d}=e;var m;A((()=>{c=a.getContext("2d"),u=new ResizeObserver((()=>{y(p,f)})),u.observe(a)})),m=()=>{u.disconnect()},E().$$.on_destroy.push(m);const y=(t,e)=>{c&&(n(0,a.width=a.clientWidth,a),n(0,a.height=a.clientHeight,a),l=Array(t*e).fill(0).map(((t,e)=>({state:d[e],canvasX:0,canvasY:0}))),h=Math.min(a.width/(t+e/2),a.height/(e*i+1)),v(),_(c))},g=(t,e)=>e*p+t,v=()=>{const t=a.width/2,e=a.height/2;for(let n=0;n<f;n++)for(let s=0;s<p;s++){const r=s-(p-1)/2,o=n-(f-1)/2,a=l[g(s,n)];a.canvasX=t+h*r+h*o/2,a.canvasY=e+i*h*o}},w=(t,e,n)=>{const s=l[e];s.state=n,t.beginPath(),t.arc(s.canvasX,s.canvasY,h/3+2,0,2*Math.PI),t.fillStyle=Mt,t.fill(),b(t,s)},b=(t,e)=>{let n;switch(e.state){case tt.Black:case tt.BlackNorth:case tt.BlackSouth:case tt.BlackWin:n="red";break;case tt.White:case tt.WhiteEast:case tt.WhiteWest:case tt.WhiteWin:n="blue";break;default:n=Mt}t.beginPath(),t.arc(e.canvasX,e.canvasY,.33*h,0,2*Math.PI),t.fillStyle=n,t.fill()},_=t=>{t.fillStyle=Mt,t.fillRect(0,0,t.canvas.width,t.canvas.height),(t=>{t.lineCap="round";for(let e=0;e<f;e++)for(let n=0;n<p;n++){const{canvasX:s,canvasY:r}=l[g(n,e)];t.beginPath(),t.moveTo(s+h*o[0].x,r+h*o[0].y),t.lineTo(s+h*o[1].x,r+h*o[1].y),t.strokeStyle="black",t.lineWidth=1,e===f-1&&(t.strokeStyle="red",t.lineWidth=3),t.stroke(),t.beginPath(),t.moveTo(s+h*o[1].x,r+h*o[1].y),t.lineTo(s+h*o[2].x,r+h*o[2].y),t.strokeStyle="black",t.lineWidth=1,n===p-1&&(t.strokeStyle="blue",t.lineWidth=3),t.stroke(),t.beginPath(),t.moveTo(s+h*o[2].x,r+h*o[2].y),t.lineTo(s+h*o[3].x,r+h*o[3].y),t.strokeStyle="black",t.lineWidth=1,n===p-1&&e>0&&(t.strokeStyle="blue",t.lineWidth=3),e<1&&(t.strokeStyle="red",t.lineWidth=3),t.stroke(),t.beginPath(),t.moveTo(s+h*o[3].x,r+h*o[3].y),t.lineTo(s+h*o[4].x,r+h*o[4].y),t.strokeStyle="black",t.lineWidth=1,e<1&&(t.strokeStyle="red",t.lineWidth=3),t.stroke(),t.beginPath(),t.moveTo(s+h*o[4].x,r+h*o[4].y),t.lineTo(s+h*o[5].x,r+h*o[5].y),t.strokeStyle="black",t.lineWidth=1,0===n&&(t.strokeStyle="blue",t.lineWidth=3),t.stroke(),t.beginPath(),t.moveTo(s+h*o[5].x,r+h*o[5].y),t.lineTo(s+h*o[0].x,r+h*o[0].y),t.strokeStyle="black",t.lineWidth=1,0===n&&e<f-1&&(t.strokeStyle="blue",t.lineWidth=3),e===f-1&&(t.strokeStyle="red",t.lineWidth=3),t.stroke()}})(t);for(const e of l)b(t,e)};return t.$$set=t=>{"boardWidth"in t&&n(2,p=t.boardWidth),"boardHeight"in t&&n(3,f=t.boardHeight),"hexState"in t&&n(4,d=t.hexState)},t.$$.update=()=>{12&t.$$.dirty&&y(p,f),16&t.$$.dirty&&(t=>{if(c)for(let e=0;e<l.length;e++)l[e].state!==t[e]&&w(c,e,t[e])})(d)},[a,t=>{t.stopPropagation();const e=a.getBoundingClientRect(),n=((t,e)=>{for(let n=0;n<l.length;n++){const s=l[n];if(Math.hypot(s.canvasX-t,s.canvasY-e)<h/2-1)return n}return null})(t.clientX-e.left,t.clientY-e.top);null!==n&&s("cellClick",n)},p,f,d,function(t){M[t?"unshift":"push"]((()=>{a=t,n(0,a)}))}]}const Pt=class extends J{constructor(t){super(),G(this,t,Ft,Bt,o,{boardWidth:2,boardHeight:3,hexState:4})}};function $t(t,e,n){const s=t.slice();return s[16]=e[n].source,s[17]=e[n].message,s}function Nt(t){let e,n,s;return{c(){e=m("svg"),n=m("path"),s=m("path"),w(n,"d","M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0 l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"),w(s,"d","M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631 C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"),w(e,"viewBox","0 0 47.607 47.607"),w(e,"class","svelte-x0kys2")},m(t,r){p(t,e,r),u(e,n),u(e,s)},d(t){t&&f(e)}}}function Rt(t){let e,n;return{c(){e=m("svg"),n=m("path"),w(n,"d","M393.538,203.629L102.557,5.543c-9.793-6.666-22.468-7.372-32.94-1.832c-10.472,5.538-17.022,16.413-17.022,28.26v396.173 c0,11.846,6.55,22.721,17.022,28.26c10.471,5.539,23.147,4.834,32.94-1.832l290.981-198.087 c8.746-5.954,13.98-15.848,13.98-26.428C407.519,219.477,402.285,209.582,393.538,203.629z"),w(e,"viewBox","0 0 460.114 460.114"),w(e,"class","svelte-x0kys2")},m(t,s){p(t,e,s),u(e,n)},d(t){t&&f(e)}}}function Wt(t){let e,n,s=t[17]+"";return{c(){e=d("div"),n=y(s)},m(t,s){p(t,e,s),u(e,n)},p(t,e){1&e&&s!==(s=t[17]+"")&&_(n,s)},d(t){t&&f(e)}}}function Ot(t){let e,n,s=t[17]+"";return{c(){e=d("div"),n=y(s),w(e,"class","message message-remote svelte-x0kys2")},m(t,s){p(t,e,s),u(e,n)},p(t,e){1&e&&s!==(s=t[17]+"")&&_(n,s)},d(t){t&&f(e)}}}function Lt(t){let e,n,s=t[17]+"";return{c(){e=d("div"),n=y(s),w(e,"class","message message-local svelte-x0kys2")},m(t,s){p(t,e,s),u(e,n)},p(t,e){1&e&&s!==(s=t[17]+"")&&_(n,s)},d(t){t&&f(e)}}}function zt(t){let e,n,s=t[17]+"";return{c(){e=d("div"),n=y(s),w(e,"class","message message-game svelte-x0kys2")},m(t,s){p(t,e,s),u(e,n)},p(t,e){1&e&&s!==(s=t[17]+"")&&_(n,s)},d(t){t&&f(e)}}}function jt(t){let e,n,s,r,i,o=t[17]+"";return{c(){e=d("div"),n=y("Invite link: "),s=d("a"),r=y(o),w(s,"href",i=t[17]),w(s,"target","_blank"),w(e,"class","message message-game svelte-x0kys2")},m(t,i){p(t,e,i),u(e,n),u(e,s),u(s,r)},p(t,e){1&e&&o!==(o=t[17]+"")&&_(r,o),1&e&&i!==(i=t[17])&&w(s,"href",i)},d(t){t&&f(e)}}}function qt(t){let e;function n(t,e){return"link"===t[16]?jt:"game"===t[16]?zt:"blue"===t[16]&&"local"===t[0]?.options.playerTypes[1]||"red"===t[16]&&"local"===t[0]?.options.playerTypes[0]?Lt:"blue"===t[16]&&"remote"===t[0]?.options.playerTypes[1]||"red"===t[16]&&"remote"===t[0]?.options.playerTypes[0]?Ot:Wt}let s=n(t),r=s(t);return{c(){r.c(),e=y("")},m(t,n){r.m(t,n),p(t,e,n)},p(t,i){s===(s=n(t))&&r?r.p(t,i):(r.d(1),r=s(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&f(e)}}}function It(e){let n,s,i,o,a,c,h,l,b,C,x,S,E,A,T,B,M,F,P,$,N,R,W,O,L,z,j,q,I,D,H,U,Y,X,V,K,G,J,Z,Q;function tt(t,e){return t[0]?.paused?Rt:Nt}let et=tt(e),nt=et(e),st=e[0]?.messages||[],rt=[];for(let t=0;t<st.length;t+=1)rt[t]=qt($t(e,st,t));return{c(){n=d("div"),s=d("h2"),i=y(e[1]),o=g(),a=d("div"),c=d("button"),h=m("svg"),l=m("path"),b=m("path"),x=g(),S=d("button"),nt.c(),A=g(),T=d("button"),B=m("svg"),M=m("path"),F=m("path"),$=g(),N=d("div"),R=d("button"),W=y("Swap"),L=g(),z=d("div"),j=d("label"),q=y("MCTS Visualization\n      "),I=d("input"),H=g(),U=d("div"),Y=d("div");for(let t=0;t<rt.length;t+=1)rt[t].c();X=g(),V=d("div"),K=d("input"),G=g(),J=d("button"),J.textContent="Send",w(s,"class","title svelte-x0kys2"),w(l,"d","M9.629,44.68c-1.154,1.16-2.895,1.51-4.407,0.885c-1.513-0.623-2.5-2.1-2.5-3.735V4.043c0-1.637,0.987-3.112,2.5-3.736 c1.513-0.625,3.253-0.275,4.407,0.885l17.862,17.951c2.088,2.098,2.088,5.488,0,7.585L9.629,44.68z"),w(b,"d","M38.252,45.975c-2.763,0-5-2.238-5-5V5c0-2.762,2.237-5,5-5c2.762,0,5,2.238,5,5v35.975 C43.252,43.736,41.013,45.975,38.252,45.975z"),w(h,"viewBox","0 0 45.974 45.975"),h.style.setProperty("transform","scale(-1,1)",""),w(h,"class","svelte-x0kys2"),c.disabled=C=!e[0]||!!e[0].socket,w(c,"class","svelte-x0kys2"),S.disabled=E=!e[0]||!!e[0].socket,w(S,"class","svelte-x0kys2"),w(M,"d","M9.629,44.68c-1.154,1.16-2.895,1.51-4.407,0.885c-1.513-0.623-2.5-2.1-2.5-3.735V4.043c0-1.637,0.987-3.112,2.5-3.736 c1.513-0.625,3.253-0.275,4.407,0.885l17.862,17.951c2.088,2.098,2.088,5.488,0,7.585L9.629,44.68z"),w(F,"d","M38.252,45.975c-2.763,0-5-2.238-5-5V5c0-2.762,2.237-5,5-5c2.762,0,5,2.238,5,5v35.975 C43.252,43.736,41.013,45.975,38.252,45.975z"),w(B,"width","45.974px"),w(B,"height","45.975px"),w(B,"viewBox","0 0 45.974 45.975"),w(B,"class","svelte-x0kys2"),T.disabled=P=!e[0]||!!e[0].socket,w(T,"class","svelte-x0kys2"),w(a,"class","control-button-container svelte-x0kys2"),R.disabled=O=!(e[0]instanceof wt&&e[0].options.swapRule&&"local"===e[0].options.playerTypes[e[0].currentPlayer]&&2===e[0].history.length),w(N,"class","swap-button-container svelte-x0kys2"),w(I,"type","checkbox"),I.disabled=D=!(e[0]instanceof wt&&("mcts"===e[0].options.playerTypes[0]||"mcts"===e[0].options.playerTypes[1])),w(z,"class","mcts-visualization-container svelte-x0kys2"),w(Y,"class","chat-messages svelte-x0kys2"),w(K,"type","text"),w(K,"class","svelte-x0kys2"),w(J,"class","svelte-x0kys2"),w(V,"class","chat-box svelte-x0kys2"),w(U,"class","chat-container svelte-x0kys2"),w(n,"class","container svelte-x0kys2")},m(t,r){p(t,n,r),u(n,s),u(s,i),u(n,o),u(n,a),u(a,c),u(c,h),u(h,l),u(h,b),u(a,x),u(a,S),nt.m(S,null),u(a,A),u(a,T),u(T,B),u(B,M),u(B,F),u(n,$),u(n,N),u(N,R),u(R,W),u(n,L),u(n,z),u(z,j),u(j,q),u(j,I),I.checked=e[4],u(n,H),u(n,U),u(U,Y);for(let t=0;t<rt.length;t+=1)rt[t].m(Y,null);e[12](Y),u(U,X),u(U,V),u(V,K),k(K,e[2]),u(V,G),u(V,J),Z||(Q=[v(c,"click",e[8]),v(S,"click",e[9]),v(T,"click",e[10]),v(R,"click",e[5]),v(I,"change",e[11]),v(K,"input",e[13]),v(K,"keydown",e[7]),v(J,"click",e[6])],Z=!0)},p(t,[e]){if(2&e&&_(i,t[1]),1&e&&C!==(C=!t[0]||!!t[0].socket)&&(c.disabled=C),et!==(et=tt(t))&&(nt.d(1),nt=et(t),nt&&(nt.c(),nt.m(S,null))),1&e&&E!==(E=!t[0]||!!t[0].socket)&&(S.disabled=E),1&e&&P!==(P=!t[0]||!!t[0].socket)&&(T.disabled=P),1&e&&O!==(O=!(t[0]instanceof wt&&t[0].options.swapRule&&"local"===t[0].options.playerTypes[t[0].currentPlayer]&&2===t[0].history.length))&&(R.disabled=O),1&e&&D!==(D=!(t[0]instanceof wt&&("mcts"===t[0].options.playerTypes[0]||"mcts"===t[0].options.playerTypes[1])))&&(I.disabled=D),16&e&&(I.checked=t[4]),1&e){let n;for(st=t[0]?.messages||[],n=0;n<st.length;n+=1){const s=$t(t,st,n);rt[n]?rt[n].p(s,e):(rt[n]=qt(s),rt[n].c(),rt[n].m(Y,null))}for(;n<rt.length;n+=1)rt[n].d(1);rt.length=st.length}4&e&&K.value!==t[2]&&k(K,t[2])},i:t,o:t,d(t){t&&f(n),nt.d(),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(rt,t),e[12](null),Z=!1,r(Q)}}}function Dt(t,e,n){let s;c(t,fi,(t=>n(4,s=t)));const r=T();let i,o,{currentGame:a}=e;const h=()=>{r("sendMessage",o),n(2,o="")};let l,u=!1;var p;return p=()=>{u=l&&l.offsetHeight+l.scrollTop>l.scrollHeight-10},E().$$.before_update.push(p),E().$$.after_update.push((()=>{u&&l.scrollTo(0,l.scrollHeight)})),t.$$set=t=>{"currentGame"in t&&n(0,a=t.currentGame)},t.$$.update=()=>{1&t.$$.dirty&&(a?void 0!==a.win?n(1,i=(a.win===Q.White?"Blue":"Red")+" wins"):a.quited?n(1,i="Game ended"):a.started?void 0!==a.currentPlayer&&n(1,i=(a.currentPlayer===Q.White?"Blue":"Red")+"'s turn"):n(1,i="Waiting for game to start"):n(1,i="No game")),1&t.$$.dirty&&(a instanceof wt&&("mcts"===a.options.playerTypes[0]||"mcts"===a.options.playerTypes[1])||fi.set(!1))},[a,i,o,l,s,()=>{r("swap")},h,t=>{"Enter"===t.key&&h()},()=>{a?.step_back()},()=>{a&&(a.paused?a.play():a.pause())},()=>{a?.step_forward()},function(){s=this.checked,fi.set(s)},function(t){M[t?"unshift":"push"]((()=>{l=t,n(3,l)}))},function(){o=this.value,n(2,o)}]}const Ht=class extends J{constructor(t){super(),G(this,t,Dt,It,o,{currentGame:0})}};function Ut(){}function Yt(t){return null==t?Ut:function(){return this.querySelector(t)}}function Xt(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Vt(){return[]}function Kt(t){return null==t?Vt:function(){return this.querySelectorAll(t)}}function Gt(t){return function(){return this.matches(t)}}function Jt(t){return function(e){return e.matches(t)}}var Zt=Array.prototype.find;function Qt(){return this.firstElementChild}var te=Array.prototype.filter;function ee(){return Array.from(this.children)}function ne(t){return new Array(t.length)}function se(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function re(t){return function(){return t}}function ie(t,e,n,s,r,i){for(var o,a=0,c=e.length,h=i.length;a<h;++a)(o=e[a])?(o.__data__=i[a],s[a]=o):n[a]=new se(t,i[a]);for(;a<c;++a)(o=e[a])&&(r[a]=o)}function oe(t,e,n,s,r,i,o){var a,c,h,l=new Map,u=e.length,p=i.length,f=new Array(u);for(a=0;a<u;++a)(c=e[a])&&(f[a]=h=o.call(c,c.__data__,a,e)+"",l.has(h)?r[a]=c:l.set(h,c));for(a=0;a<p;++a)h=o.call(t,i[a],a,i)+"",(c=l.get(h))?(s[a]=c,c.__data__=i[a],l.delete(h)):n[a]=new se(t,i[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(f[a])===c&&(r[a]=c)}function ae(t){return t.__data__}function ce(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function he(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}se.prototype={constructor:se,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var le="http://www.w3.org/1999/xhtml";const ue={svg:"http://www.w3.org/2000/svg",xhtml:le,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pe(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ue.hasOwnProperty(e)?{space:ue[e],local:t}:t}function fe(t){return function(){this.removeAttribute(t)}}function de(t){return function(){this.removeAttributeNS(t.space,t.local)}}function me(t,e){return function(){this.setAttribute(t,e)}}function ye(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ge(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function ve(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function we(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function be(t){return function(){this.style.removeProperty(t)}}function _e(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ke(t,e,n){return function(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function Ce(t,e){return t.style.getPropertyValue(e)||we(t).getComputedStyle(t,null).getPropertyValue(e)}function xe(t){return function(){delete this[t]}}function Se(t,e){return function(){this[t]=e}}function Ee(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ae(t){return t.trim().split(/^|\s+/)}function Te(t){return t.classList||new Be(t)}function Be(t){this._node=t,this._names=Ae(t.getAttribute("class")||"")}function Me(t,e){for(var n=Te(t),s=-1,r=e.length;++s<r;)n.add(e[s])}function Fe(t,e){for(var n=Te(t),s=-1,r=e.length;++s<r;)n.remove(e[s])}function Pe(t){return function(){Me(this,t)}}function $e(t){return function(){Fe(this,t)}}function Ne(t,e){return function(){(e.apply(this,arguments)?Me:Fe)(this,t)}}function Re(){this.textContent=""}function We(t){return function(){this.textContent=t}}function Oe(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Le(){this.innerHTML=""}function ze(t){return function(){this.innerHTML=t}}function je(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function qe(){this.nextSibling&&this.parentNode.appendChild(this)}function Ie(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function De(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===le&&e.documentElement.namespaceURI===le?e.createElement(t):e.createElementNS(n,t)}}function He(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ue(t){var e=pe(t);return(e.local?He:De)(e)}function Ye(){return null}function Xe(){var t=this.parentNode;t&&t.removeChild(this)}function Ve(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ke(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ge(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Je(t){return function(){var e=this.__on;if(e){for(var n,s=0,r=-1,i=e.length;s<i;++s)n=e[s],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function Ze(t,e,n){return function(){var s,r=this.__on,i=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var o=0,a=r.length;o<a;++o)if((s=r[o]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),void(s.value=e);this.addEventListener(t.type,i,n),s={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(s):this.__on=[s]}}function Qe(t,e,n){var s=we(t),r=s.CustomEvent;"function"==typeof r?r=new r(e,n):(r=s.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function tn(t,e){return function(){return Qe(this,t,e)}}function en(t,e){return function(){return Qe(this,t,e.apply(this,arguments))}}Be.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var nn=[null];function sn(t,e){this._groups=t,this._parents=e}function rn(){return new sn([[document.documentElement]],nn)}sn.prototype=rn.prototype={constructor:sn,select:function(t){"function"!=typeof t&&(t=Yt(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i,o,a=e[r],c=a.length,h=s[r]=new Array(c),l=0;l<c;++l)(i=a[l])&&(o=t.call(i,i.__data__,l,a))&&("__data__"in i&&(o.__data__=i.__data__),h[l]=o);return new sn(s,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return Xt(t.apply(this,arguments))}}(t):Kt(t);for(var e=this._groups,n=e.length,s=[],r=[],i=0;i<n;++i)for(var o,a=e[i],c=a.length,h=0;h<c;++h)(o=a[h])&&(s.push(t.call(o,o.__data__,h,a)),r.push(o));return new sn(s,r)},selectChild:function(t){return this.select(null==t?Qt:function(t){return function(){return Zt.call(this.children,t)}}("function"==typeof t?t:Jt(t)))},selectChildren:function(t){return this.selectAll(null==t?ee:function(t){return function(){return te.call(this.children,t)}}("function"==typeof t?t:Jt(t)))},filter:function(t){"function"!=typeof t&&(t=Gt(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i,o=e[r],a=o.length,c=s[r]=[],h=0;h<a;++h)(i=o[h])&&t.call(i,i.__data__,h,o)&&c.push(i);return new sn(s,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,ae);var n=e?oe:ie,s=this._parents,r=this._groups;"function"!=typeof t&&(t=re(t));for(var i=r.length,o=new Array(i),a=new Array(i),c=new Array(i),h=0;h<i;++h){var l=s[h],u=r[h],p=u.length,f=ce(t.call(l,l&&l.__data__,h,s)),d=f.length,m=a[h]=new Array(d),y=o[h]=new Array(d),g=c[h]=new Array(p);n(l,u,m,y,g,f,e);for(var v,w,b=0,_=0;b<d;++b)if(v=m[b]){for(b>=_&&(_=b+1);!(w=y[_])&&++_<d;);v._next=w||null}}return(o=new sn(o,s))._enter=a,o._exit=c,o},enter:function(){return new sn(this._enter||this._groups.map(ne),this._parents)},exit:function(){return new sn(this._exit||this._groups.map(ne),this._parents)},join:function(t,e,n){var s=this.enter(),r=this,i=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?i.remove():n(i),s&&r?s.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,s=e._groups,r=n.length,i=s.length,o=Math.min(r,i),a=new Array(r),c=0;c<o;++c)for(var h,l=n[c],u=s[c],p=l.length,f=a[c]=new Array(p),d=0;d<p;++d)(h=l[d]||u[d])&&(f[d]=h);for(;c<r;++c)a[c]=n[c];return new sn(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var s,r=t[e],i=r.length-1,o=r[i];--i>=0;)(s=r[i])&&(o&&4^s.compareDocumentPosition(o)&&o.parentNode.insertBefore(s,o),o=s);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=he);for(var n=this._groups,s=n.length,r=new Array(s),i=0;i<s;++i){for(var o,a=n[i],c=a.length,h=r[i]=new Array(c),l=0;l<c;++l)(o=a[l])&&(h[l]=o);h.sort(e)}return new sn(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s=t[e],r=0,i=s.length;r<i;++r){var o=s[r];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,s=e.length;n<s;++n)for(var r,i=e[n],o=0,a=i.length;o<a;++o)(r=i[o])&&t.call(r,r.__data__,o,i);return this},attr:function(t,e){var n=pe(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((null==e?n.local?de:fe:"function"==typeof e?n.local?ve:ge:n.local?ye:me)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?be:"function"==typeof e?ke:_e)(t,e,null==n?"":n)):Ce(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?xe:"function"==typeof e?Ee:Se)(t,e)):this.node()[t]},classed:function(t,e){var n=Ae(t+"");if(arguments.length<2){for(var s=Te(this.node()),r=-1,i=n.length;++r<i;)if(!s.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Ne:e?Pe:$e)(n,e))},text:function(t){return arguments.length?this.each(null==t?Re:("function"==typeof t?Oe:We)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Le:("function"==typeof t?je:ze)(t)):this.node().innerHTML},raise:function(){return this.each(qe)},lower:function(){return this.each(Ie)},append:function(t){var e="function"==typeof t?t:Ue(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Ue(t),s=null==e?Ye:"function"==typeof e?e:Yt(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)}))},remove:function(){return this.each(Xe)},clone:function(t){return this.select(t?Ke:Ve)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var s,r,i=Ge(t+""),o=i.length;if(!(arguments.length<2)){for(a=e?Ze:Je,s=0;s<o;++s)this.each(a(i[s],e,n));return this}var a=this.node().__on;if(a)for(var c,h=0,l=a.length;h<l;++h)for(s=0,c=a[h];s<o;++s)if((r=i[s]).type===c.type&&r.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?en:tn)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var s,r=t[e],i=0,o=r.length;i<o;++i)(s=r[i])&&(yield s)}};const on=rn;var an={value:()=>{}};function cn(){for(var t,e=0,n=arguments.length,s={};e<n;++e){if(!(t=arguments[e]+"")||t in s||/[\s.]/.test(t))throw new Error("illegal type: "+t);s[t]=[]}return new hn(s)}function hn(t){this._=t}function ln(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",s=t.indexOf(".");if(s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function un(t,e){for(var n,s=0,r=t.length;s<r;++s)if((n=t[s]).name===e)return n.value}function pn(t,e,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===e){t[s]=an,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=n&&t.push({name:e,value:n}),t}hn.prototype=cn.prototype={constructor:hn,on:function(t,e){var n,s=this._,r=ln(t+"",s),i=-1,o=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<o;)if(n=(t=r[i]).type)s[n]=pn(s[n],t.name,e);else if(null==e)for(n in s)s[n]=pn(s[n],t.name,null);return this}for(;++i<o;)if((n=(t=r[i]).type)&&(n=un(s[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new hn(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,s,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(s=this._[t]).length;i<n;++i)s[i].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)}};const fn=cn;var dn,mn,yn=0,gn=0,vn=0,wn=0,bn=0,_n=0,kn="object"==typeof performance&&performance.now?performance:Date,Cn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function xn(){return bn||(Cn(Sn),bn=kn.now()+_n)}function Sn(){bn=0}function En(){this._call=this._time=this._next=null}function An(t,e,n){var s=new En;return s.restart(t,e,n),s}function Tn(){bn=(wn=kn.now())+_n,yn=gn=0;try{!function(){xn(),++yn;for(var t,e=dn;e;)(t=bn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--yn}()}finally{yn=0,function(){for(var t,e,n=dn,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:dn=e);mn=t,Mn(s)}(),bn=0}}function Bn(){var t=kn.now(),e=t-wn;e>1e3&&(_n-=e,wn=t)}function Mn(t){yn||(gn&&(gn=clearTimeout(gn)),t-bn>24?(t<1/0&&(gn=setTimeout(Tn,t-kn.now()-_n)),vn&&(vn=clearInterval(vn))):(vn||(wn=kn.now(),vn=setInterval(Bn,1e3)),yn=1,Cn(Tn)))}function Fn(t,e,n){var s=new En;return e=null==e?0:+e,s.restart((n=>{s.stop(),t(n+e)}),e,n),s}En.prototype=An.prototype={constructor:En,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?xn():+n)+(null==e?0:+e),this._next||mn===this||(mn?mn._next=this:dn=this,mn=this),this._call=t,this._time=n,Mn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mn())}};var Pn=fn("start","end","cancel","interrupt"),$n=[];function Nn(t,e,n,s,r,i){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var s,r=t.__transition;function i(c){var h,l,u,p;if(1!==n.state)return a();for(h in r)if((p=r[h]).name===n.name){if(3===p.state)return Fn(i);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[h]):+h<e&&(p.state=6,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[h])}if(Fn((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(c))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,s=new Array(u=n.tween.length),h=0,l=-1;h<u;++h)(p=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(s[++l]=p);s.length=l+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),i=-1,o=s.length;++i<o;)s[i].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var s in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=An((function(t){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)}),0,n.time)}(t,n,{name:e,index:s,group:r,on:Pn,tween:$n,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function Rn(t,e){var n=On(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Wn(t,e){var n=On(t,e);if(n.state>3)throw new Error("too late; already running");return n}function On(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ln(t,e){var n,s,r,i=t.__transition,o=!0;if(i){for(r in e=null==e?null:e+"",i)(n=i[r]).name===e?(s=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(s?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[r]):o=!1;o&&delete t.__transition}}function zn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var jn,qn=180/Math.PI,In={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dn(t,e,n,s,r,i){var o,a,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*s)&&(n-=t*c,s-=e*c),(a=Math.sqrt(n*n+s*s))&&(n/=a,s/=a,c/=a),t*s<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(e,t)*qn,skewX:Math.atan(c)*qn,scaleX:o,scaleY:a}}function Hn(t,e,n,s){function r(t){return t.length?t.pop()+" ":""}return function(i,o){var a=[],c=[];return i=t(i),o=t(o),function(t,s,r,i,o,a){if(t!==r||s!==i){var c=o.push("translate(",null,e,null,n);a.push({i:c-4,x:zn(t,r)},{i:c-2,x:zn(s,i)})}else(r||i)&&o.push("translate("+r+e+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,a,c),function(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(r(n)+"rotate(",null,s)-2,x:zn(t,e)})):e&&n.push(r(n)+"rotate("+e+s)}(i.rotate,o.rotate,a,c),function(t,e,n,i){t!==e?i.push({i:n.push(r(n)+"skewX(",null,s)-2,x:zn(t,e)}):e&&n.push(r(n)+"skewX("+e+s)}(i.skewX,o.skewX,a,c),function(t,e,n,s,i,o){if(t!==n||e!==s){var a=i.push(r(i)+"scale(",null,",",null,")");o.push({i:a-4,x:zn(t,n)},{i:a-2,x:zn(e,s)})}else 1===n&&1===s||i.push(r(i)+"scale("+n+","+s+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,a,c),i=o=null,function(t){for(var e,n=-1,s=c.length;++n<s;)a[(e=c[n]).i]=e.x(t);return a.join("")}}}var Un=Hn((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?In:Dn(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Yn=Hn((function(t){return null==t?In:(jn||(jn=document.createElementNS("http://www.w3.org/2000/svg","g")),jn.setAttribute("transform",t),(t=jn.transform.baseVal.consolidate())?Dn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):In)}),", ",")",")");function Xn(t,e){var n,s;return function(){var r=Wn(this,t),i=r.tween;if(i!==n)for(var o=0,a=(s=n=i).length;o<a;++o)if(s[o].name===e){(s=s.slice()).splice(o,1);break}r.tween=s}}function Vn(t,e,n){var s,r;if("function"!=typeof n)throw new Error;return function(){var i=Wn(this,t),o=i.tween;if(o!==s){r=(s=o).slice();for(var a={name:e,value:n},c=0,h=r.length;c<h;++c)if(r[c].name===e){r[c]=a;break}c===h&&r.push(a)}i.tween=r}}function Kn(t,e,n){var s=t._id;return t.each((function(){var t=Wn(this,s);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return On(t,s).value[e]}}function Gn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Jn(t,e){var n=Object.create(t.prototype);for(var s in e)n[s]=e[s];return n}function Zn(){}var Qn=.7,ts=1/Qn,es="\\s*([+-]?\\d+)\\s*",ns="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ss="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rs=/^#([0-9a-f]{3,8})$/,is=new RegExp("^rgb\\("+[es,es,es]+"\\)$"),os=new RegExp("^rgb\\("+[ss,ss,ss]+"\\)$"),as=new RegExp("^rgba\\("+[es,es,es,ns]+"\\)$"),cs=new RegExp("^rgba\\("+[ss,ss,ss,ns]+"\\)$"),hs=new RegExp("^hsl\\("+[ns,ss,ss]+"\\)$"),ls=new RegExp("^hsla\\("+[ns,ss,ss,ns]+"\\)$"),us={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ps(){return this.rgb().formatHex()}function fs(){return this.rgb().formatRgb()}function ds(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=rs.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ms(e):3===n?new ws(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ys(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ys(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=is.exec(t))?new ws(e[1],e[2],e[3],1):(e=os.exec(t))?new ws(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=as.exec(t))?ys(e[1],e[2],e[3],e[4]):(e=cs.exec(t))?ys(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=hs.exec(t))?Cs(e[1],e[2]/100,e[3]/100,1):(e=ls.exec(t))?Cs(e[1],e[2]/100,e[3]/100,e[4]):us.hasOwnProperty(t)?ms(us[t]):"transparent"===t?new ws(NaN,NaN,NaN,0):null}function ms(t){return new ws(t>>16&255,t>>8&255,255&t,1)}function ys(t,e,n,s){return s<=0&&(t=e=n=NaN),new ws(t,e,n,s)}function gs(t){return t instanceof Zn||(t=ds(t)),t?new ws((t=t.rgb()).r,t.g,t.b,t.opacity):new ws}function vs(t,e,n,s){return 1===arguments.length?gs(t):new ws(t,e,n,null==s?1:s)}function ws(t,e,n,s){this.r=+t,this.g=+e,this.b=+n,this.opacity=+s}function bs(){return"#"+ks(this.r)+ks(this.g)+ks(this.b)}function _s(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ks(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Cs(t,e,n,s){return s<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ss(t,e,n,s)}function xs(t){if(t instanceof Ss)return new Ss(t.h,t.s,t.l,t.opacity);if(t instanceof Zn||(t=ds(t)),!t)return new Ss;if(t instanceof Ss)return t;var e=(t=t.rgb()).r/255,n=t.g/255,s=t.b/255,r=Math.min(e,n,s),i=Math.max(e,n,s),o=NaN,a=i-r,c=(i+r)/2;return a?(o=e===i?(n-s)/a+6*(n<s):n===i?(s-e)/a+2:(e-n)/a+4,a/=c<.5?i+r:2-i-r,o*=60):a=c>0&&c<1?0:o,new Ss(o,a,c,t.opacity)}function Ss(t,e,n,s){this.h=+t,this.s=+e,this.l=+n,this.opacity=+s}function Es(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function As(t,e,n,s,r){var i=t*t,o=i*t;return((1-3*t+3*i-o)*e+(4-6*i+3*o)*n+(1+3*t+3*i-3*o)*s+o*r)/6}Gn(Zn,ds,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ps,formatHex:ps,formatHsl:function(){return xs(this).formatHsl()},formatRgb:fs,toString:fs}),Gn(ws,vs,Jn(Zn,{brighter:function(t){return t=null==t?ts:Math.pow(ts,t),new ws(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Qn:Math.pow(Qn,t),new ws(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bs,formatHex:bs,formatRgb:_s,toString:_s})),Gn(Ss,(function(t,e,n,s){return 1===arguments.length?xs(t):new Ss(t,e,n,null==s?1:s)}),Jn(Zn,{brighter:function(t){return t=null==t?ts:Math.pow(ts,t),new Ss(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Qn:Math.pow(Qn,t),new Ss(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*e,r=2*n-s;return new ws(Es(t>=240?t-240:t+120,r,s),Es(t,r,s),Es(t<120?t+240:t-120,r,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Ts=t=>()=>t;function Bs(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Ts(isNaN(t)?e:t)}const Ms=function t(e){var n=function(t){return 1==(t=+t)?Bs:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(s){return Math.pow(t+s*e,n)}}(e,n,t):Ts(isNaN(e)?n:e)}}(e);function s(t,e){var s=n((t=vs(t)).r,(e=vs(e)).r),r=n(t.g,e.g),i=n(t.b,e.b),o=Bs(t.opacity,e.opacity);return function(e){return t.r=s(e),t.g=r(e),t.b=i(e),t.opacity=o(e),t+""}}return s.gamma=t,s}(1);function Fs(t){return function(e){var n,s,r=e.length,i=new Array(r),o=new Array(r),a=new Array(r);for(n=0;n<r;++n)s=vs(e[n]),i[n]=s.r||0,o[n]=s.g||0,a[n]=s.b||0;return i=t(i),o=t(o),a=t(a),s.opacity=1,function(t){return s.r=i(t),s.g=o(t),s.b=a(t),s+""}}}Fs((function(t){var e=t.length-1;return function(n){var s=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[s],i=t[s+1],o=s>0?t[s-1]:2*r-i,a=s<e-1?t[s+2]:2*i-r;return As((n-s/e)*e,o,r,i,a)}})),Fs((function(t){var e=t.length;return function(n){var s=Math.floor(((n%=1)<0?++n:n)*e),r=t[(s+e-1)%e],i=t[s%e],o=t[(s+1)%e],a=t[(s+2)%e];return As((n-s/e)*e,r,i,o,a)}}));var Ps=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$s=new RegExp(Ps.source,"g");function Ns(t,e){var n,s,r,i=Ps.lastIndex=$s.lastIndex=0,o=-1,a=[],c=[];for(t+="",e+="";(n=Ps.exec(t))&&(s=$s.exec(e));)(r=s.index)>i&&(r=e.slice(i,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,c.push({i:o,x:zn(n,s)})),i=$s.lastIndex;return i<e.length&&(r=e.slice(i),a[o]?a[o]+=r:a[++o]=r),a.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,s=0;s<e;++s)a[(n=c[s]).i]=n.x(t);return a.join("")})}function Rs(t,e){var n;return("number"==typeof e?zn:e instanceof ds?Ms:(n=ds(e))?(e=n,Ms):Ns)(t,e)}function Ws(t){return function(){this.removeAttribute(t)}}function Os(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ls(t,e,n){var s,r,i=n+"";return function(){var o=this.getAttribute(t);return o===i?null:o===s?r:r=e(s=o,n)}}function zs(t,e,n){var s,r,i=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===s?r:r=e(s=o,n)}}function js(t,e,n){var s,r,i;return function(){var o,a,c=n(this);if(null!=c)return(o=this.getAttribute(t))===(a=c+"")?null:o===s&&a===r?i:(r=a,i=e(s=o,c));this.removeAttribute(t)}}function qs(t,e,n){var s,r,i;return function(){var o,a,c=n(this);if(null!=c)return(o=this.getAttributeNS(t.space,t.local))===(a=c+"")?null:o===s&&a===r?i:(r=a,i=e(s=o,c));this.removeAttributeNS(t.space,t.local)}}function Is(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ds(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Hs(t,e){var n,s;function r(){var r=e.apply(this,arguments);return r!==s&&(n=(s=r)&&Ds(t,r)),n}return r._value=e,r}function Us(t,e){var n,s;function r(){var r=e.apply(this,arguments);return r!==s&&(n=(s=r)&&Is(t,r)),n}return r._value=e,r}function Ys(t,e){return function(){Rn(this,t).delay=+e.apply(this,arguments)}}function Xs(t,e){return e=+e,function(){Rn(this,t).delay=e}}function Vs(t,e){return function(){Wn(this,t).duration=+e.apply(this,arguments)}}function Ks(t,e){return e=+e,function(){Wn(this,t).duration=e}}function Gs(t,e){if("function"!=typeof e)throw new Error;return function(){Wn(this,t).ease=e}}function Js(t,e,n){var s,r,i=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Rn:Wn;return function(){var o=i(this,t),a=o.on;a!==s&&(r=(s=a).copy()).on(e,n),o.on=r}}var Zs=on.prototype.constructor;function Qs(t){return function(){this.style.removeProperty(t)}}function tr(t,e,n){return function(s){this.style.setProperty(t,e.call(this,s),n)}}function er(t,e,n){var s,r;function i(){var i=e.apply(this,arguments);return i!==r&&(s=(r=i)&&tr(t,i,n)),s}return i._value=e,i}function nr(t){return function(e){this.textContent=t.call(this,e)}}function sr(t){var e,n;function s(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&nr(s)),e}return s._value=t,s}var rr=0;function ir(t,e,n,s){this._groups=t,this._parents=e,this._name=n,this._id=s}function or(){return++rr}var ar=on.prototype;ir.prototype=function(t){return on().transition(t)}.prototype={constructor:ir,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Yt(t));for(var s=this._groups,r=s.length,i=new Array(r),o=0;o<r;++o)for(var a,c,h=s[o],l=h.length,u=i[o]=new Array(l),p=0;p<l;++p)(a=h[p])&&(c=t.call(a,a.__data__,p,h))&&("__data__"in a&&(c.__data__=a.__data__),u[p]=c,Nn(u[p],e,n,p,u,On(a,n)));return new ir(i,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Kt(t));for(var s=this._groups,r=s.length,i=[],o=[],a=0;a<r;++a)for(var c,h=s[a],l=h.length,u=0;u<l;++u)if(c=h[u]){for(var p,f=t.call(c,c.__data__,u,h),d=On(c,n),m=0,y=f.length;m<y;++m)(p=f[m])&&Nn(p,e,n,m,f,d);i.push(f),o.push(c)}return new ir(i,o,e,n)},selectChild:ar.selectChild,selectChildren:ar.selectChildren,filter:function(t){"function"!=typeof t&&(t=Gt(t));for(var e=this._groups,n=e.length,s=new Array(n),r=0;r<n;++r)for(var i,o=e[r],a=o.length,c=s[r]=[],h=0;h<a;++h)(i=o[h])&&t.call(i,i.__data__,h,o)&&c.push(i);return new ir(s,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,s=e.length,r=n.length,i=Math.min(s,r),o=new Array(s),a=0;a<i;++a)for(var c,h=e[a],l=n[a],u=h.length,p=o[a]=new Array(u),f=0;f<u;++f)(c=h[f]||l[f])&&(p[f]=c);for(;a<s;++a)o[a]=e[a];return new ir(o,this._parents,this._name,this._id)},selection:function(){return new Zs(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=or(),s=this._groups,r=s.length,i=0;i<r;++i)for(var o,a=s[i],c=a.length,h=0;h<c;++h)if(o=a[h]){var l=On(o,e);Nn(o,t,n,h,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ir(s,this._parents,t,n)},call:ar.call,nodes:ar.nodes,node:ar.node,size:ar.size,empty:ar.empty,each:ar.each,on:function(t,e){var n=this._id;return arguments.length<2?On(this.node(),n).on.on(t):this.each(Js(n,t,e))},attr:function(t,e){var n=pe(t),s="transform"===n?Yn:Rs;return this.attrTween(t,"function"==typeof e?(n.local?qs:js)(n,s,Kn(this,"attr."+t,e)):null==e?(n.local?Os:Ws)(n):(n.local?zs:Ls)(n,s,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var s=pe(t);return this.tween(n,(s.local?Hs:Us)(s,e))},style:function(t,e,n){var s="transform"==(t+="")?Un:Rs;return null==e?this.styleTween(t,function(t,e){var n,s,r;return function(){var i=Ce(this,t),o=(this.style.removeProperty(t),Ce(this,t));return i===o?null:i===n&&o===s?r:r=e(n=i,s=o)}}(t,s)).on("end.style."+t,Qs(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var s,r,i;return function(){var o=Ce(this,t),a=n(this),c=a+"";return null==a&&(this.style.removeProperty(t),c=a=Ce(this,t)),o===c?null:o===s&&c===r?i:(r=c,i=e(s=o,a))}}(t,s,Kn(this,"style."+t,e))).each(function(t,e){var n,s,r,i,o="style."+e,a="end."+o;return function(){var c=Wn(this,t),h=c.on,l=null==c.value[o]?i||(i=Qs(e)):void 0;h===n&&r===l||(s=(n=h).copy()).on(a,r=l),c.on=s}}(this._id,t)):this.styleTween(t,function(t,e,n){var s,r,i=n+"";return function(){var o=Ce(this,t);return o===i?null:o===s?r:r=e(s=o,n)}}(t,s,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==e)return this.tween(s,null);if("function"!=typeof e)throw new Error;return this.tween(s,er(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Kn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,sr(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var s,r=On(this.node(),n).tween,i=0,o=r.length;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((null==e?Xn:Vn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ys:Xs)(e,t)):On(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Vs:Ks)(e,t)):On(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Gs(e,t)):On(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Wn(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,s=n._id,r=n.size();return new Promise((function(i,o){var a={value:o},c={value:function(){0==--r&&i()}};n.each((function(){var n=Wn(this,s),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),n.on=e})),0===r&&i()}))},[Symbol.iterator]:ar[Symbol.iterator]};var cr={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function hr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}on.prototype.interrupt=function(t){return this.each((function(){Ln(this,t)}))},on.prototype.transition=function(t){var e,n;t instanceof ir?(e=t._id,t=t._name):(e=or(),(n=cr).time=xn(),t=null==t?null:t+"");for(var s=this._groups,r=s.length,i=0;i<r;++i)for(var o,a=s[i],c=a.length,h=0;h<c;++h)(o=a[h])&&Nn(o,t,e,h,a,n||hr(o,e));return new ir(s,this._parents,t,e)};const{abs:lr,max:ur,min:pr}=Math;function fr(t){return{type:t}}function dr(t){var e=0,n=t.children,s=n&&n.length;if(s)for(;--s>=0;)e+=n[s].value;else e=1;t.value=e}function mr(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=gr)):void 0===e&&(e=yr);for(var n,s,r,i,o,a=new br(t),c=[a];n=c.pop();)if((r=e(n.data))&&(o=(r=Array.from(r)).length))for(n.children=r,i=o-1;i>=0;--i)c.push(s=r[i]=new br(r[i])),s.parent=n,s.depth=n.depth+1;return a.eachBefore(wr)}function yr(t){return t.children}function gr(t){return Array.isArray(t)?t[1]:null}function vr(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function wr(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function br(t){this.data=t,this.depth=this.height=0,this.parent=null}function _r(t,e){return t.parent===e.parent?1:2}function kr(t){var e=t.children;return e?e[0]:t.t}function Cr(t){var e=t.children;return e?e[e.length-1]:t.t}function xr(t,e,n){var s=n/(e.i-t.i);e.c-=s,e.s+=n,t.c+=s,e.z+=n,e.m+=n}function Sr(t,e,n){return t.a.parent===e.parent?t.a:n}function Er(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}["w","e"].map(fr),["n","s"].map(fr),["n","w","e","s","nw","ne","sw","se"].map(fr),br.prototype=mr.prototype={constructor:br,count:function(){return this.eachAfter(dr)},each:function(t,e){let n=-1;for(const s of this)t.call(e,s,++n,this);return this},eachAfter:function(t,e){for(var n,s,r,i=this,o=[i],a=[],c=-1;i=o.pop();)if(a.push(i),n=i.children)for(s=0,r=n.length;s<r;++s)o.push(n[s]);for(;i=a.pop();)t.call(e,i,++c,this);return this},eachBefore:function(t,e){for(var n,s,r=this,i=[r],o=-1;r=i.pop();)if(t.call(e,r,++o,this),n=r.children)for(s=n.length-1;s>=0;--s)i.push(n[s]);return this},find:function(t,e){let n=-1;for(const s of this)if(t.call(e,s,++n,this))return s},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,s=e.children,r=s&&s.length;--r>=0;)n+=s[r].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),s=e.ancestors(),r=null;for(t=n.pop(),e=s.pop();t===e;)r=t,t=n.pop(),e=s.pop();return r}(e,t),s=[e];e!==n;)e=e.parent,s.push(e);for(var r=s.length;t!==n;)s.splice(r,0,t),t=t.parent;return s},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return mr(this).eachBefore(vr)},[Symbol.iterator]:function*(){var t,e,n,s,r=this,i=[r];do{for(t=i.reverse(),i=[];r=t.pop();)if(yield r,e=r.children)for(n=0,s=e.length;n<s;++n)i.push(e[n])}while(i.length)}},Er.prototype=Object.create(br.prototype);const Ar=Math.PI,Tr=2*Ar,Br=1e-6,Mr=Tr-Br;function Fr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Pr(){return new Fr}Fr.prototype=Pr.prototype={constructor:Fr,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,s){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+s)},bezierCurveTo:function(t,e,n,s,r,i){this._+="C"+ +t+","+ +e+","+ +n+","+ +s+","+(this._x1=+r)+","+(this._y1=+i)},arcTo:function(t,e,n,s,r){t=+t,e=+e,n=+n,s=+s,r=+r;var i=this._x1,o=this._y1,a=n-t,c=s-e,h=i-t,l=o-e,u=h*h+l*l;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(u>Br)if(Math.abs(l*a-c*h)>Br&&r){var p=n-i,f=s-o,d=a*a+c*c,m=p*p+f*f,y=Math.sqrt(d),g=Math.sqrt(u),v=r*Math.tan((Ar-Math.acos((d+u-m)/(2*y*g)))/2),w=v/g,b=v/y;Math.abs(w-1)>Br&&(this._+="L"+(t+w*h)+","+(e+w*l)),this._+="A"+r+","+r+",0,0,"+ +(l*p>h*f)+","+(this._x1=t+b*a)+","+(this._y1=e+b*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,s,r,i){t=+t,e=+e,i=!!i;var o=(n=+n)*Math.cos(s),a=n*Math.sin(s),c=t+o,h=e+a,l=1^i,u=i?s-r:r-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+h:(Math.abs(this._x1-c)>Br||Math.abs(this._y1-h)>Br)&&(this._+="L"+c+","+h),n&&(u<0&&(u=u%Tr+Tr),u>Mr?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+l+","+(this._x1=c)+","+(this._y1=h):u>Br&&(this._+="A"+n+","+n+",0,"+ +(u>=Ar)+","+l+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,s){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +s+"h"+-n+"Z"},toString:function(){return this._}};const $r=Pr;function Nr(t){return"string"==typeof t?new sn([[document.querySelector(t)]],[document.documentElement]):new sn([[t]],nn)}var Rr=Array.prototype.slice;function Wr(t){return function(){return t}}function Or(t){return t[0]}function Lr(t){return t[1]}function zr(t){return t.source}function jr(t){return t.target}function qr(t,e,n,s,r){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+r)/2,s,n,s,r)}const Ir={capture:!0,passive:!1};function Dr(t){t.preventDefault(),t.stopImmediatePropagation()}function Hr(t){var e=t.document.documentElement,n=Nr(t).on("dragstart.drag",Dr,Ir);"onselectstart"in e?n.on("selectstart.drag",Dr,Ir):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ur(t,e){var n=t.document.documentElement,s=Nr(t).on("dragstart.drag",null);e&&(s.on("click.drag",Dr,Ir),setTimeout((function(){s.on("click.drag",null)}),0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Yr(t){return((t=Math.exp(t))+1/t)/2}const Xr=function t(e,n,s){function r(t,r){var i,o,a=t[0],c=t[1],h=t[2],l=r[0],u=r[1],p=r[2],f=l-a,d=u-c,m=f*f+d*d;if(m<1e-12)o=Math.log(p/h)/e,i=function(t){return[a+t*f,c+t*d,h*Math.exp(e*t*o)]};else{var y=Math.sqrt(m),g=(p*p-h*h+s*m)/(2*h*n*y),v=(p*p-h*h-s*m)/(2*p*n*y),w=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(v*v+1)-v);o=(b-w)/e,i=function(t){var s,r=t*o,i=Yr(w),l=h/(n*y)*(i*(s=e*r+w,((s=Math.exp(2*s))-1)/(s+1))-function(t){return((t=Math.exp(t))-1/t)/2}(w));return[a+l*f,c+l*d,h*i/Yr(e*r+w)]}}return i.duration=1e3*o*e/Math.SQRT2,i}return r.rho=function(e){var n=Math.max(.001,+e),s=n*n;return t(n,s,s*s)},r}(Math.SQRT2,2,4);function Vr(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,[(s=s.matrixTransform(e.getScreenCTM().inverse())).x,s.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Kr=t=>()=>t;function Gr(t,{sourceEvent:e,target:n,transform:s,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:r}})}function Jr(t,e,n){this.k=t,this.x=e,this.y=n}Jr.prototype={constructor:Jr,scale:function(t){return 1===t?this:new Jr(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Jr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zr=new Jr(1,0,0);function Qr(t){t.stopImmediatePropagation()}function ti(t){t.preventDefault(),t.stopImmediatePropagation()}function ei(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function ni(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function si(){return this.__zoom||Zr}function ri(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ii(){return navigator.maxTouchPoints||"ontouchstart"in this}function oi(t,e,n){var s=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function ai(t){let e;return{c(){e=d("div"),e.innerHTML="<pre>MCTS Visualization\n\nScroll to zoom\nDrag to pan\nClick on a cell to expand or close\nShift click to close all children\nHover on a cell for details\nYellow line indicates MCTS best path</pre>",w(e,"class","dropdown svelte-1akhtda")},m(t,n){p(t,e,n)},d(t){t&&f(e)}}}function ci(e){let n,s,r,i,o,a,c=e[0]&&ai();return{c(){n=d("div"),s=m("svg"),r=m("path"),i=g(),c&&c.c(),w(r,"d","M164,0C73.425,0,0,73.425,0,164s73.425,164,164,164c90.574,0,164-73.425,164-164S254.574,0,164,0z M192.258,166.965\n   c-1.595,19.083-7.367,37.419-10.235,56.287c-0.408,3.604-1.255,9.354,0.525,11.191c4.896,5.055,10.007,12.635,7.509,21.716\n   c-2.303,8.368-10.912,15.118-19.748,15.118c-14.274,0-24.958-13.498-27.754-25.399c-1.987-8.458-1.872-16.961-0.734-25.499\n   c2.281-17.133,7.011-33.788,9.625-50.839c-7.714-1.192-14.605-7.1-16.714-14.764c-3.015-10.962,3.635-21.609,14.162-24.943\n   c11.198-3.545,26.408-3.078,34.701,6.775C193.797,148.735,192.682,161.885,192.258,166.965z M165.957,112.809\n   c-15.489,0-28.043-12.554-28.043-28.043c0-15.488,12.555-28.042,28.043-28.042S194,69.277,194,84.766\n   C194,100.255,181.445,112.809,165.957,112.809z"),w(s,"viewBox","0 0 328 328"),w(s,"class","info_button svelte-1akhtda"),w(n,"class","container svelte-1akhtda"),w(n,"id","mcts_visualization_container")},m(t,h){p(t,n,h),u(n,s),u(s,r),u(n,i),c&&c.m(n,null),o||(a=v(s,"click",e[5]),o=!0)},p(t,[e]){t[0]?c||(c=ai(),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},i:t,o:t,d(t){t&&f(n),c&&c.d(),o=!1,a()}}}function hi(t,e,n){const s=Math.sqrt(3),r=Math.sqrt(3)/2,i=[{x:0,y:1/s},{x:.5,y:.5/s},{x:.5,y:-.5/s},{x:0,y:-1/s},{x:-.5,y:-.5/s},{x:-.5,y:.5/s}];let o,{data:a={}}=e,{boardWidth:c=0}=e,{boardHeight:h=0}=e;const l=new Promise((t=>{A((()=>{t()}))}));let u,p,f;const d=async t=>{await l;let e=120+20*Math.pow(o,.6);f&&(f.selectChildren().remove(),f.remove());const n=mr(t);if(n.height>0){f=Nr("#mcts_visualization_container").append("svg").attr("viewBox",[-800,-80,1600,1600]).style("font","10px sans-serif").style("user-select","none");const t=f.append("defs").append("radialGradient").attr("id","cellHighlight");t.append("stop").attr("offset","68%").attr("stop-color","yellow"),t.append("stop").attr("offset","100%").attr("stop-color","transparent");const s=function(t){var e=zr,n=jr,s=Or,r=Lr,i=null;function o(){var o,a=Rr.call(arguments),c=e.apply(this,a),h=n.apply(this,a);if(i||(i=o=$r()),t(i,+s.apply(this,(a[0]=c,a)),+r.apply(this,a),+s.apply(this,(a[0]=h,a)),+r.apply(this,a)),o)return i=null,o+""||null}return o.source=function(t){return arguments.length?(e=t,o):e},o.target=function(t){return arguments.length?(n=t,o):n},o.x=function(t){return arguments.length?(s="function"==typeof t?t:Wr(+t),o):s},o.y=function(t){return arguments.length?(r="function"==typeof t?t:Wr(+t),o):r},o.context=function(t){return arguments.length?(i=null==t?null:t,o):i},o}(qr).x((t=>t.x)).y((t=>t.y));n.x0=e/2,n.y0=0,n.descendants().forEach(((t,e)=>{t.id=e,t._children=t.children,t.children=null}));const i=f.append("g").attr("fill","none"),o=f.append("g").attr("cursor","pointer").attr("pointer-events","all");f.call(function(){var t,e,n,s=ei,r=ni,i=oi,o=ri,a=ii,c=[0,1/0],h=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Xr,p=fn("start","zoom","end"),f=500,d=0,m=10;function y(t){t.property("__zoom",si).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",S).filter(a).on("touchstart.zoom",E).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(c[0],Math.min(c[1],e)))===t.k?t:new Jr(e,t.x,t.y)}function v(t,e,n){var s=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return s===t.x&&r===t.y?t:new Jr(t.k,s,r)}function w(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n,s){t.on("start.zoom",(function(){_(this,arguments).event(s).start()})).on("interrupt.zoom end.zoom",(function(){_(this,arguments).event(s).end()})).tween("zoom",(function(){var t=this,i=arguments,o=_(t,i).event(s),a=r.apply(t,i),c=null==n?w(a):"function"==typeof n?n.apply(t,i):n,h=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),l=t.__zoom,p="function"==typeof e?e.apply(t,i):e,f=u(l.invert(c).concat(h/l.k),p.invert(c).concat(h/p.k));return function(t){if(1===t)t=p;else{var e=f(t),n=h/e[2];t=new Jr(n,c[0]-e[0]*n,c[1]-e[1]*n)}o.zoom(null,t)}}))}function _(t,e,n){return!n&&t.__zooming||new k(t,e)}function k(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=r.apply(t,e),this.taps=0}function C(t,...e){if(s.apply(this,arguments)){var n=_(this,e).event(t),r=this.__zoom,a=Math.max(c[0],Math.min(c[1],r.k*Math.pow(2,o.apply(this,arguments)))),l=Vr(t);if(n.wheel)n.mouse[0][0]===l[0]&&n.mouse[0][1]===l[1]||(n.mouse[1]=r.invert(n.mouse[0]=l)),clearTimeout(n.wheel);else{if(r.k===a)return;n.mouse=[l,r.invert(l)],Ln(this),n.start()}ti(t),n.wheel=setTimeout(u,150),n.zoom("mouse",i(v(g(r,a),n.mouse[0],n.mouse[1]),n.extent,h))}function u(){n.wheel=null,n.end()}}function x(t,...e){if(!n&&s.apply(this,arguments)){var r=t.currentTarget,o=_(this,e,!0).event(t),a=Nr(t.view).on("mousemove.zoom",p,!0).on("mouseup.zoom",f,!0),c=Vr(t,r),l=t.clientX,u=t.clientY;Hr(t.view),Qr(t),o.mouse=[c,this.__zoom.invert(c)],Ln(this),o.start()}function p(t){if(ti(t),!o.moved){var e=t.clientX-l,n=t.clientY-u;o.moved=e*e+n*n>d}o.event(t).zoom("mouse",i(v(o.that.__zoom,o.mouse[0]=Vr(t,r),o.mouse[1]),o.extent,h))}function f(t){a.on("mousemove.zoom mouseup.zoom",null),Ur(t.view,o.moved),ti(t),o.event(t).end()}}function S(t,...e){if(s.apply(this,arguments)){var n=this.__zoom,o=Vr(t.changedTouches?t.changedTouches[0]:t,this),a=n.invert(o),c=n.k*(t.shiftKey?.5:2),u=i(v(g(n,c),o,a),r.apply(this,e),h);ti(t),l>0?Nr(this).transition().duration(l).call(b,u,o,t):Nr(this).call(y.transform,u,o,t)}}function E(n,...r){if(s.apply(this,arguments)){var i,o,a,c,h=n.touches,l=h.length,u=_(this,r,n.changedTouches.length===l).event(n);for(Qr(n),o=0;o<l;++o)c=[c=Vr(a=h[o],this),this.__zoom.invert(c),a.identifier],u.touch0?u.touch1||u.touch0[2]===c[2]||(u.touch1=c,u.taps=0):(u.touch0=c,i=!0,u.taps=1+!!t);t&&(t=clearTimeout(t)),i&&(u.taps<2&&(e=c[0],t=setTimeout((function(){t=null}),f)),Ln(this),u.start())}}function A(t,...e){if(this.__zooming){var n,s,r,o,a=_(this,e).event(t),c=t.changedTouches,l=c.length;for(ti(t),n=0;n<l;++n)r=Vr(s=c[n],this),a.touch0&&a.touch0[2]===s.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===s.identifier&&(a.touch1[0]=r);if(s=a.that.__zoom,a.touch1){var u=a.touch0[0],p=a.touch0[1],f=a.touch1[0],d=a.touch1[1],m=(m=f[0]-u[0])*m+(m=f[1]-u[1])*m,y=(y=d[0]-p[0])*y+(y=d[1]-p[1])*y;s=g(s,Math.sqrt(m/y)),r=[(u[0]+f[0])/2,(u[1]+f[1])/2],o=[(p[0]+d[0])/2,(p[1]+d[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],o=a.touch0[1]}a.zoom("touch",i(v(s,r,o),a.extent,h))}}function T(t,...s){if(this.__zooming){var r,i,o=_(this,s).event(t),a=t.changedTouches,c=a.length;for(Qr(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),r=0;r<c;++r)i=a[r],o.touch0&&o.touch0[2]===i.identifier?delete o.touch0:o.touch1&&o.touch1[2]===i.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(i=Vr(i,this),Math.hypot(e[0]-i[0],e[1]-i[1])<m)){var h=Nr(this).on("dblclick.zoom");h&&h.apply(this,arguments)}}}return y.transform=function(t,e,n,s){var r=t.selection?t.selection():t;r.property("__zoom",si),t!==r?b(t,e,n,s):r.interrupt().each((function(){_(this,arguments).event(s).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},y.scaleBy=function(t,e,n,s){y.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,s)},y.scaleTo=function(t,e,n,s){y.transform(t,(function(){var t=r.apply(this,arguments),s=this.__zoom,o=null==n?w(t):"function"==typeof n?n.apply(this,arguments):n,a=s.invert(o),c="function"==typeof e?e.apply(this,arguments):e;return i(v(g(s,c),o,a),t,h)}),n,s)},y.translateBy=function(t,e,n,s){y.transform(t,(function(){return i(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),h)}),null,s)},y.translateTo=function(t,e,n,s,o){y.transform(t,(function(){var t=r.apply(this,arguments),o=this.__zoom,a=null==s?w(t):"function"==typeof s?s.apply(this,arguments):s;return i(Zr.translate(a[0],a[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,h)}),s,o)},k.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Nr(this.that).datum();p.call(t,this.that,new Gr(t,{sourceEvent:this.sourceEvent,target:y,type:t,transform:this.that.__zoom,dispatch:p}),e)}},y.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:Kr(+t),y):o},y.filter=function(t){return arguments.length?(s="function"==typeof t?t:Kr(!!t),y):s},y.touchable=function(t){return arguments.length?(a="function"==typeof t?t:Kr(!!t),y):a},y.extent=function(t){return arguments.length?(r="function"==typeof t?t:Kr([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):r},y.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],y):[c[0],c[1]]},y.translateExtent=function(t){return arguments.length?(h[0][0]=+t[0][0],h[1][0]=+t[1][0],h[0][1]=+t[0][1],h[1][1]=+t[1][1],y):[[h[0][0],h[0][1]],[h[1][0],h[1][1]]]},y.constrain=function(t){return arguments.length?(i=t,y):i},y.duration=function(t){return arguments.length?(l=+t,y):l},y.interpolate=function(t){return arguments.length?(u=t,y):u},y.on=function(){var t=p.on.apply(p,arguments);return t===p?y:t},y.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,y):Math.sqrt(d)},y.tapDistance=function(t){return arguments.length?(m=+t,y):m},y}().on("zoom",(t=>{o.attr("transform",t.transform),i.attr("transform",t.transform)}))).on("dblclick.zoom",null);const a=t=>{const l=n.descendants().reverse(),d=n.links(),m=(function(){var t=_r,e=1,n=1,s=null;function r(r){var c=function(t){for(var e,n,s,r,i,o=new Er(t,0),a=[o];e=a.pop();)if(s=e._.children)for(e.children=new Array(i=s.length),r=i-1;r>=0;--r)a.push(n=e.children[r]=new Er(s[r],r)),n.parent=e;return(o.parent=new Er(null,0)).children=[o],o}(r);if(c.eachAfter(i),c.parent.m=-c.z,c.eachBefore(o),s)r.eachBefore(a);else{var h=r,l=r,u=r;r.eachBefore((function(t){t.x<h.x&&(h=t),t.x>l.x&&(l=t),t.depth>u.depth&&(u=t)}));var p=h===l?1:t(h,l)/2,f=p-h.x,d=e/(l.x+p+f),m=n/(u.depth||1);r.eachBefore((function(t){t.x=(t.x+f)*d,t.y=t.depth*m}))}return r}function i(e){var n=e.children,s=e.parent.children,r=e.i?s[e.i-1]:null;if(n){!function(t){for(var e,n=0,s=0,r=t.children,i=r.length;--i>=0;)(e=r[i]).z+=n,e.m+=n,n+=e.s+(s+=e.c)}(e);var i=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-i):e.z=i}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,s){if(n){for(var r,i=e,o=e,a=n,c=i.parent.children[0],h=i.m,l=o.m,u=a.m,p=c.m;a=Cr(a),i=kr(i),a&&i;)c=kr(c),(o=Cr(o)).a=e,(r=a.z+u-i.z-h+t(a._,i._))>0&&(xr(Sr(a,e,s),e,r),h+=r,l+=r),u+=a.m,h+=i.m,p+=c.m,l+=o.m;a&&!Cr(o)&&(o.t=a,o.m+=u-l),i&&!kr(c)&&(c.t=i,c.m+=h-p,s=e)}return s}(e,r,e.parent.A||s[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t){t.x*=e,t.y=t.depth*n}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(s=!1,e=+t[0],n=+t[1],r):s?null:[e,n]},r.nodeSize=function(t){return arguments.length?(s=!0,e=+t[0],n=+t[1],r):s?[e,n]:null},r}().nodeSize([80,e])(n),f.transition().duration(250)),g=o.selectAll(".node").data(l,(t=>t.id)),v=g.enter().append("g").attr("class","node").attr("transform",(e=>`translate(${t.x0}, ${t.y0})`)).attr("fill-opacity",0).attr("stroke-opacity",0).on("click",((t,e)=>{if(t.shiftKey){const t=e=>{if(e.children=null,e._children)for(const n of e._children)t(n)};t(e)}else e.children=e.children?null:e._children;a(e)}));v.append("title").text((t=>`sims: ${t.data.numSims}\nwins: ${t.data.numWins}`)),v.append("path").attr("fill",(t=>t._children?"#AAA":"#CFCFCF")).attr("stroke",(t=>t._children?"#AAA":"#CFCFCF")).attr("stroke-width",8).attr("stroke-linejoin","round").attr("d",(()=>{const t=$r(),e=c/2,n=h/2;return t.moveTo(u*-e+u*-n/2,r*u*-n),t.lineTo(u*+e+u*-n/2,r*u*-n),t.lineTo(u*+e+u*+n/2,r*u*n),t.lineTo(u*-e+u*+n/2,r*u*n),t.closePath(),t})),v.append("path").style("fill","none").style("stroke","black").attr("stroke-width",.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("d",(()=>{let t=$r();return y(t),t})),v.filter((t=>t.data.lastMove>=0)).append("circle").attr("r",.5*u).attr("transform",(t=>{const e=p[t.data.lastMove];return`translate(${e.canvasX}, ${e.canvasY})`})).attr("fill","url('#cellHighlight')").style("mix-blend-mode","color");for(const[t,e]of p.entries())v.filter((e=>e.data.state[t]!==tt.Empty)).append("circle").attr("r",.33*u).attr("transform",(t=>`translate(${e.canvasX}, ${e.canvasY})`)).attr("fill",(e=>{switch(e.data.state[t]){case tt.Black:case tt.BlackNorth:case tt.BlackSouth:case tt.BlackWin:return"red";case tt.White:case tt.WhiteEast:case tt.WhiteWest:case tt.WhiteWin:return"blue";default:return"none"}}));g.merge(v).transition(m).attr("transform",(t=>`translate(${t.x}, ${t.y})`)).attr("fill-opacity",1).attr("stroke-opacity",1),g.exit().transition(m).remove().attr("transform",(e=>`translate(${t.x}, ${t.y})`)).attr("fill-opacity",0).attr("stroke-opacity",0);const w=i.selectAll("path").data(d,(t=>t.target.id));let b=-1/0;for(const e of t.data.children){let t=e.numWins/e.numSims;t>b&&(b=t)}const _=w.enter().append("path").attr("d",(e=>{const n={x:t.x0,y:t.y0};return s({source:n,target:n})})).attr("stroke",(t=>t.target.data.numWins/t.target.data.numSims===b?"yellow":0===t.target.data.lastPlayer?"red":"blue")).attr("stroke-opacity",(t=>t.target.data.numWins/t.target.data.numSims===b?1:.6+Math.log(t.target.data.numSims)/16)).attr("stroke-width",(t=>.6+Math.log(t.target.data.numSims)**1.2/4));w.merge(_).transition(m).attr("d",s),w.exit().transition(m).remove().attr("d",(e=>{const n={x:t.x,y:t.y};return s({source:n,target:n})})),n.eachBefore((t=>{t.x0=t.x,t.y0=t.y}))};a(n)}},m=(t,e)=>e*c+t,y=t=>{for(let e=0;e<h;e++)for(let n=0;n<c;n++){const{canvasX:s,canvasY:r}=p[m(n,e)];t.moveTo(s+u*i[0].x,r+u*i[0].y),t.lineTo(s+u*i[1].x,r+u*i[1].y),t.moveTo(s+u*i[1].x,r+u*i[1].y),t.lineTo(s+u*i[2].x,r+u*i[2].y),t.moveTo(s+u*i[2].x,r+u*i[2].y),t.lineTo(s+u*i[3].x,r+u*i[3].y),t.moveTo(s+u*i[3].x,r+u*i[3].y),t.lineTo(s+u*i[4].x,r+u*i[4].y),t.moveTo(s+u*i[4].x,r+u*i[4].y),t.lineTo(s+u*i[5].x,r+u*i[5].y),t.moveTo(s+u*i[5].x,r+u*i[5].y),t.lineTo(s+u*i[0].x,r+u*i[0].y)}};let g=!1;return t.$$set=t=>{"data"in t&&n(1,a=t.data),"boardWidth"in t&&n(2,c=t.boardWidth),"boardHeight"in t&&n(3,h=t.boardHeight)},t.$$.update=()=>{12&t.$$.dirty&&n(4,o=c*h),28&t.$$.dirty&&(u=80/(c+h/2),p=Array(o).fill(0).map((()=>({canvasX:0,canvasY:0}))),(()=>{for(let t=0;t<h;t++)for(let e=0;e<c;e++){const n=e-(c-1)/2,s=t-(h-1)/2,i=p[m(e,t)];i.canvasX=u*n+u*s/2,i.canvasY=r*u*s}})()),2&t.$$.dirty&&d(a)},[g,a,c,h,o,()=>n(0,g=!g)]}Jr.prototype;const li=class extends J{constructor(t){super(),G(this,t,hi,ci,o,{data:1,boardWidth:2,boardHeight:3})}};function ui(t){let e,n;return e=new li({props:{data:t[2]||{},boardWidth:t[0]?.hexBoard.width||5,boardHeight:t[0]?.hexBoard.height||5}}),{c(){X(e.$$.fragment)},m(t,s){V(e,t,s),n=!0},p(t,n){const s={};4&n&&(s.data=t[2]||{}),1&n&&(s.boardWidth=t[0]?.hexBoard.width||5),1&n&&(s.boardHeight=t[0]?.hexBoard.height||5),e.$set(s)},i(t){n||(D(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function pi(t){let e,n,s,i,o,a,c,h,l,m;n=new Tt({}),n.$on("submit",t[7]),i=new Pt({props:{boardWidth:t[0]?.hexBoard.width||0,boardHeight:t[0]?.hexBoard.height||0,hexState:t[1]}}),i.$on("cellClick",t[5]),a=new Ht({props:{currentGame:t[0]}}),a.$on("swap",t[8]),a.$on("sendMessage",t[6]);let y=t[3]&&ui(t);return{c(){e=d("div"),X(n.$$.fragment),s=g(),X(i.$$.fragment),o=g(),X(a.$$.fragment),c=g(),y&&y.c(),h=g(),l=d("a"),l.innerHTML='<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm svelte-89cc9h"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg>',w(e,"class","gameui svelte-89cc9h"),w(l,"href","https://github.com/sergmister/hex-online"),w(l,"target","_blank"),w(l,"class","github-corner svelte-89cc9h"),w(l,"aria-label","View source on GitHub")},m(t,r){p(t,e,r),V(n,e,null),u(e,s),V(i,e,null),u(e,o),V(a,e,null),p(t,c,r),y&&y.m(t,r),p(t,h,r),p(t,l,r),m=!0},p(t,[e]){const n={};1&e&&(n.boardWidth=t[0]?.hexBoard.width||0),1&e&&(n.boardHeight=t[0]?.hexBoard.height||0),2&e&&(n.hexState=t[1]),i.$set(n);const s={};1&e&&(s.currentGame=t[0]),a.$set(s),t[3]?y?(y.p(t,e),8&e&&D(y,1)):(y=ui(t),y.c(),D(y,1),y.m(h.parentNode,h)):y&&(q={r:0,c:[],p:q},H(y,1,1,(()=>{y=null})),q.r||r(q.c),q=q.p)},i(t){m||(D(n.$$.fragment,t),D(i.$$.fragment,t),D(a.$$.fragment,t),D(y),m=!0)},o(t){H(n.$$.fragment,t),H(i.$$.fragment,t),H(a.$$.fragment,t),H(y),m=!1},d(t){t&&f(e),K(n),K(i),K(a),t&&f(c),y&&y.d(t),t&&f(h),t&&f(l)}}}const fi=function(e,n=t){let s;const r=new Set;function i(t){if(o(e,t)&&(e=t,s)){const t=!Z.length;for(const t of r)t[1](),Z.push(t,e);if(t){for(let t=0;t<Z.length;t+=2)Z[t][0](Z[t+1]);Z.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(o,a=t){const c=[o,a];return r.add(c),1===r.size&&(s=n(i)||t),o(e),()=>{r.delete(c),0===r.size&&(s(),s=null)}}}}(!1);function di(e,n,s){let r,i,o=t;c(e,fi,(t=>s(3,r=t))),e.$$.on_destroy.push((()=>o()));let a,h=new Uint8Array(0);A((()=>{const t=new URLSearchParams(window.location.search),e=t.get("game"),n=t.get("gameid"),s=t.get("serverAddress");t.delete("game"),t.delete("gameid"),t.delete("serverAddress"),window.history.replaceState("","","?"+t.toString()),e&&n&&s&&l(e,n,decodeURIComponent(s))}));const l=(t,e,n)=>{const s=new URL(t,n),r=et(s.toString(),{query:{gameid:e},reconnection:!1});r.on("joined",(e=>{"hex"===t?e.dark=!1:"darkhex"===t&&(e.dark=!0),u(e,r)}))},u=(t,e)=>{if(i){if(void 0===i.win&&!i.quited&&!window.confirm("Do you want to stop the current the game?"))return;i.quit()}t.dark?s(0,i=new _t(Object.assign(Object.assign({},t),{playerTypes:t.playerTypes}),p,e)):s(0,i=new wt(Object.assign(Object.assign({},t),{playerTypes:t.playerTypes}),p,e)),p(i)},p=t=>{if(s(0,i=t),t instanceof wt){s(1,h=t.currentState);let e=t.players[st(t.currentPlayer)].ai;s(2,a=e instanceof ot?e.rootNode:{})}else void 0!==t.win?s(1,h=t.currentState):"local"===t.options.playerTypes[t.currentPlayer]?s(1,h=t.visibleBoards[t.currentPlayer]):"local"===t.options.playerTypes[st(t.currentPlayer)]?s(1,h=t.visibleBoards[st(t.currentPlayer)]):s(1,h=t.currentState)};return[i,h,a,r,u,t=>{null==i||i.local_move(t.detail)},t=>{i&&i.sendMessage(t.detail)},t=>{u(t.detail)},()=>{i instanceof wt&&i.local_swap()}]}const mi=class extends J{constructor(t){super(),G(this,t,di,pi,o,{})}};function yi(e){let n,s,r;return s=new mi({}),{c(){n=d("main"),X(s.$$.fragment)},m(t,e){p(t,n,e),V(s,n,null),r=!0},p:t,i(t){r||(D(s.$$.fragment,t),r=!0)},o(t){H(s.$$.fragment,t),r=!1},d(t){t&&f(n),K(s)}}}new class extends J{constructor(t){super(),G(this,t,null,yi,o,{})}}({target:document.body})})()})();